(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{64418:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.SponsoredAuthorization=e.StandardAuthorization=e.Authorization=e.nextVerification=e.nextSignature=e.makeSigHashPreSign=e.deserializeSpendingCondition=e.serializeSpendingCondition=e.deserializeMultiSigSpendingCondition=e.deserializeSingleSigSpendingCondition=e.serializeMultiSigSpendingCondition=e.serializeSingleSigSpendingCondition=e.isSingleSig=e.createMultiSigSpendingCondition=e.createSingleSigSpendingCondition=e.deserializeTransactionAuthField=e.serializeTransactionAuthField=e.createTransactionAuthField=e.deserializeMessageSignature=e.serializeMessageSignature=e.emptyMessageSignature=e.createMessageSignature=void 0;const i=n(39954),o=n(40517),s=n(67327),a=n(61325),u=n(31318),c=n(8982);function h(t){if(r.from(t,"hex").byteLength!=i.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES)throw Error("Invalid signature");return{type:i.StacksMessageType.MessageSignature,data:t}}function l(){return{type:i.StacksMessageType.MessageSignature,data:r.alloc(i.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES,0).toString("hex")}}function d(t){const e=new o.BufferArray;return e.appendHexString(t.data),e.concatBuffer()}function f(t){return h(t.readBuffer(i.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES).toString("hex"))}var p;function y(t){return{type:i.StacksMessageType.TransactionAuthField,contents:t}}function g(t,e,n,r){return{hashMode:t,signer:s.addressFromPublicKeys(0,t,1,[a.createStacksPublicKey(e)]).hash160,nonce:n,fee:r,keyEncoding:a.isCompressed(a.createStacksPublicKey(e))?i.PubKeyEncoding.Compressed:i.PubKeyEncoding.Uncompressed,signature:l()}}function m(t){return"signature"in t}function w(t){const e=o.cloneDeep(t);return e.nonce=new u(0),e.fee=new u(0),m(e)?e.signature=l():e.fields=[],e}function v(t){const e=new o.BufferArray;return e.appendByte(t.hashMode),e.appendHexString(t.signer),e.push(t.nonce.toArrayLike(r,"be",8)),e.push(t.fee.toArrayLike(r,"be",8)),e.appendByte(t.keyEncoding),e.push(d(t.signature)),e.concatBuffer()}function S(t){const e=new o.BufferArray;e.appendByte(t.hashMode),e.appendHexString(t.signer),e.push(t.nonce.toArrayLike(r,"be",8)),e.push(t.fee.toArrayLike(r,"be",8));const n=s.createLPList(t.fields);e.push(s.serializeLPList(n));const i=r.alloc(2);return i.writeUInt16BE(t.signaturesRequired,0),e.push(i),e.concatBuffer()}function b(t,e){return{hashMode:t,signer:e.readBuffer(20).toString("hex"),nonce:new u(e.readBuffer(8).toString("hex"),16),fee:new u(e.readBuffer(8).toString("hex"),16),keyEncoding:e.readUInt8Enum(i.PubKeyEncoding,(t=>{throw new c.DeserializationError(`Could not parse ${t} as PubKeyEncoding`)})),signature:f(e)}}function C(t,e){return{hashMode:t,signer:e.readBuffer(20).toString("hex"),nonce:new u(e.readBuffer(8).toString("hex"),16),fee:new u(e.readBuffer(8).toString("hex"),16),fields:s.deserializeLPList(e,i.StacksMessageType.TransactionAuthField).values,signaturesRequired:e.readUInt16BE()}}function T(t){return m(t)?v(t):S(t)}function M(t){const e=t.readUInt8Enum(i.AddressHashMode,(t=>{throw new c.DeserializationError(`Could not parse ${t} as AddressHashMode`)}));return e===i.AddressHashMode.SerializeP2PKH||e===i.AddressHashMode.SerializeP2WPKH?b(e,t):C(e,t)}function A(t,e,n,i){const s=t+r.from([e]).toString("hex")+n.toArrayLike(r,"be",8).toString("hex")+i.toArrayLike(r,"be",8).toString("hex");if(49!==r.from(s,"hex").byteLength)throw Error("Invalid signature hash length");return o.txidFromData(r.from(s,"hex"))}function P(t,e,n){const s=33+i.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES,a=t+o.leftPadHex(e.toString(16))+n.data;if(r.from(a,"hex").byteLength>s)throw Error("Invalid signature hash length");return o.txidFromData(r.from(a,"hex"))}function E(t,e,n,r,o,s){const u=A(t,e,n,r);return{pubKey:a.createStacksPublicKey(a.publicKeyFromSignature(u,s)),nextSigHash:P(u,i.PubKeyEncoding.Compressed,s)}}function B(t,e,n){return m(t)?function(t,e,n){const{pubKey:r,nextSigHash:i}=E(e,n,t.fee,t.nonce,t.keyEncoding,t.signature);return i}(t,e,n):""}e.createMessageSignature=h,e.emptyMessageSignature=l,e.serializeMessageSignature=d,e.deserializeMessageSignature=f,function(t){t[t.PublicKey=0]="PublicKey",t[t.Signature=2]="Signature"}(p||(p={})),e.createTransactionAuthField=y,e.serializeTransactionAuthField=function(t){const e=new o.BufferArray;switch(t.contents.type){case i.StacksMessageType.PublicKey:e.appendByte(p.PublicKey),e.push(a.serializePublicKey(t.contents));break;case i.StacksMessageType.MessageSignature:e.appendByte(p.Signature),e.push(d(t.contents))}return e.concatBuffer()},e.deserializeTransactionAuthField=function(t){const e=t.readUInt8Enum(p,(t=>{throw new c.DeserializationError(`Could not read ${t} as AuthFieldType`)}));switch(e){case p.PublicKey:return y(a.deserializePublicKey(t));case p.Signature:return y(f(t));default:throw new Error(`Unknown auth field type: ${JSON.stringify(e)}`)}},e.createSingleSigSpendingCondition=g,e.createMultiSigSpendingCondition=function(t,e,n,r,i){const o=n.map(a.createStacksPublicKey);return{hashMode:t,signer:s.addressFromPublicKeys(0,t,e,o).hash160,nonce:r,fee:i,fields:[],signaturesRequired:e}},e.isSingleSig=m,e.serializeSingleSigSpendingCondition=v,e.serializeMultiSigSpendingCondition=S,e.deserializeSingleSigSpendingCondition=b,e.deserializeMultiSigSpendingCondition=C,e.serializeSpendingCondition=T,e.deserializeSpendingCondition=M,e.makeSigHashPreSign=A,e.nextSignature=function(t,e,n,r,o){const s=A(t,e,n,r),u=a.signWithKey(o,s),c=a.getPublicKey(o);return{nextSig:u,nextSigHash:P(s,a.isCompressed(c)?i.PubKeyEncoding.Compressed:i.PubKeyEncoding.Uncompressed,u)}},e.nextVerification=E;class k extends class{static deserialize(t){const e=new this;return e.deserialize(t),e}}{constructor(t,e,n){super(),this.authType=t,this.spendingCondition=e,this.sponsorSpendingCondition=n}intoInitialSighashAuth(){if(this.spendingCondition)switch(this.authType){case i.AuthType.Standard:return new k(i.AuthType.Standard,w(this.spendingCondition));case i.AuthType.Sponsored:return new k(i.AuthType.Sponsored,w(this.spendingCondition),function(){const t=g(i.AddressHashMode.SerializeP2PKH,"",new u(0),new u(0));return t.signer=s.createEmptyAddress().hash160,t.keyEncoding=i.PubKeyEncoding.Compressed,t.signature=l(),t}());default:throw new c.SigningError("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}setFee(t){switch(this.authType){case i.AuthType.Standard:this.spendingCondition.fee=t;break;case i.AuthType.Sponsored:this.sponsorSpendingCondition.fee=t}}getFee(){switch(this.authType){case i.AuthType.Standard:return this.spendingCondition.fee;case i.AuthType.Sponsored:return this.sponsorSpendingCondition.fee}}setNonce(t){this.spendingCondition.nonce=t}setSponsorNonce(t){this.sponsorSpendingCondition.nonce=t}setSponsor(t){this.sponsorSpendingCondition=t}verifyOrigin(t){switch(this.authType){case i.AuthType.Standard:case i.AuthType.Sponsored:return B(this.spendingCondition,t,i.AuthType.Standard);default:throw new c.SigningError("Invalid origin auth type")}}serialize(){const t=new o.BufferArray;if(void 0===this.authType)throw new c.SerializationError('"authType" is undefined');switch(t.appendByte(this.authType),this.authType){case i.AuthType.Standard:if(void 0===this.spendingCondition)throw new c.SerializationError('"spendingCondition" is undefined');t.push(T(this.spendingCondition));break;case i.AuthType.Sponsored:if(void 0===this.spendingCondition)throw new c.SerializationError('"spendingCondition" is undefined');if(void 0===this.sponsorSpendingCondition)throw new c.SerializationError('"spendingCondition" is undefined');t.push(T(this.spendingCondition)),t.push(T(this.sponsorSpendingCondition));break;default:throw new c.SerializationError(`Unexpected transaction AuthType while serializing: ${JSON.stringify(this.authType)}`)}return t.concatBuffer()}deserialize(t){switch(this.authType=t.readUInt8Enum(i.AuthType,(t=>{throw new c.DeserializationError(`Could not parse ${t} as AuthType`)})),this.authType){case i.AuthType.Standard:this.spendingCondition=M(t);break;case i.AuthType.Sponsored:this.spendingCondition=M(t),this.sponsorSpendingCondition=M(t);break;default:throw new c.DeserializationError(`Unexpected transaction AuthType while deserializing: ${JSON.stringify(this.authType)}`)}}}e.Authorization=k;e.StandardAuthorization=class extends k{constructor(t){super(i.AuthType.Standard,t)}};e.SponsoredAuthorization=class extends k{constructor(t,e){let n=e;n||(n=g(i.AddressHashMode.SerializeP2PKH,"0".repeat(66),new u(0),new u(0))),super(i.AuthType.Sponsored,t,n)}}},49880:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=e.isEnum=void 0;const i=n(93717);const o=new Map;function s(t,e){const n=o.get(t);if(void 0!==n)return n(e);const r=function(t){const e=Object.values(t).filter((t=>"number"===typeof t)),n=new Set(e);return t=>n.has(t)}(t);return o.set(t,r),s(t,e)}e.isEnum=s;class a extends i.SmartBuffer{static fromBuffer(t){return new a({buff:t})}constructor(t){r.isBuffer(t)?super({buff:t}):super(t)}readBigUIntLE(t){const e=r.from(this.readBuffer(t)).reverse().toString("hex");return BigInt(`0x${e}`)}readBigUIntBE(t){const e=this.readBuffer(t).toString("hex");return BigInt(`0x${e}`)}readUInt8Enum(t,e){const n=this.readUInt8();if(s(t,n))return n;throw e(n)}}e.BufferReader=a},45118:function(t,e,n){"use strict";var r=n(48764).Buffer,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.sponsorTransaction=e.callReadOnlyFunction=e.makeContractNonFungiblePostCondition=e.makeStandardNonFungiblePostCondition=e.makeContractFungiblePostCondition=e.makeStandardFungiblePostCondition=e.makeContractSTXPostCondition=e.makeStandardSTXPostCondition=e.makeContractCall=e.estimateContractFunctionCall=e.makeContractDeploy=e.estimateContractDeploy=e.makeSTXTokenTransfer=e.makeUnsignedSTXTokenTransfer=e.getAbi=e.broadcastRawTransaction=e.broadcastTransaction=e.estimateTransfer=e.getNonce=void 0;const o=n(71905),s=n(62807),a=n(47541),u=n(64418),c=n(61325),h=n(15532),l=n(41059),d=n(39954),f=n(67327),p=n(40517),y=n(31318),g=n(54713),m=n(27701);function w(t,e){return i(this,void 0,void 0,(function*(){const n=new s.StacksMainnet,r=e?e.getAccountApiUrl(t):n.getAccountApiUrl(t),i=yield p.fetchPrivate(r);if(!i.ok){let t="";try{t=yield i.text()}catch(a){}throw new Error(`Error fetching nonce. Response ${i.status}: ${i.statusText}. Attempted to fetch ${r} and failed with the message: "${t}"`)}const o=yield i.json();return new y(o.nonce)}))}function v(t,e){return i(this,void 0,void 0,(function*(){if(t.payload.payloadType!==d.PayloadType.TokenTransfer)throw new Error(`Transaction fee estimation only possible with ${d.PayloadType[d.PayloadType.TokenTransfer]} transactions. Invoked with: ${d.PayloadType[t.payload.payloadType]}`);const n={method:"GET",headers:{Accept:"application/text"}},r=new s.StacksMainnet,i=e?e.getTransferFeeEstimateApiUrl():r.getTransferFeeEstimateApiUrl(),o=yield p.fetchPrivate(i,n);if(!o.ok){let t="";try{t=yield o.text()}catch(c){}throw new Error(`Error estimating transaction fee. Response ${o.status}: ${o.statusText}. Attempted to fetch ${i} and failed with the message: "${t}"`)}const a=yield o.text(),u=new y(t.serialize().byteLength);return new y(a).mul(u)}))}function S(t,e){return i(this,void 0,void 0,(function*(){const n={method:"POST",headers:{"Content-Type":"application/octet-stream"},body:t},r=yield p.fetchPrivate(e,n);if(!r.ok)try{return yield r.json()}catch(i){throw Error(`Failed to broadcast transaction: ${i.message}`)}try{return yield r.clone().json()}catch(i){return yield r.clone().text()}}))}function b(t,e,n){return i(this,void 0,void 0,(function*(){const r=n.getAbiApiUrl(t,e),i=yield p.fetchPrivate(r,{method:"GET"});if(!i.ok){let n="";try{n=yield i.text()}catch(o){}throw new Error(`Error fetching contract ABI for contract "${e}" at address ${t}. Response ${i.status}: ${i.statusText}. Attempted to fetch ${r} and failed with the message: "${n}"`)}return JSON.parse(yield i.text())}))}function C(t){return i(this,void 0,void 0,(function*(){const e={fee:new y(0),nonce:new y(0),network:new s.StacksMainnet,anchorMode:d.AnchorMode.Any,postConditionMode:d.PostConditionMode.Deny,memo:"",sponsored:!1},n=Object.assign(e,t),r=a.createTokenTransferPayload(n.recipient,n.amount,n.memo);let i=null,c=null;c="publicKey"in n?u.createSingleSigSpendingCondition(d.AddressHashMode.SerializeP2PKH,n.publicKey,n.nonce,n.fee):u.createMultiSigSpendingCondition(d.AddressHashMode.SerializeP2SH,n.numSignatures,n.publicKeys,n.nonce,n.fee),i=n.sponsored?new u.SponsoredAuthorization(c):new u.StandardAuthorization(c);const h=[];n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((t=>{h.push(t)}));const l=f.createLPList(h),p=new o.StacksTransaction(n.network.version,i,r,l,n.postConditionMode,e.anchorMode,n.network.chainId);if(!t.fee){const t=yield v(p,n.network);p.setFee(t)}if(!t.nonce){const t=n.network.version===d.TransactionVersion.Mainnet?d.AddressVersion.MainnetSingleSig:d.AddressVersion.TestnetSingleSig,e=m.c32address(t,p.auth.spendingCondition.signer),r=yield w(e,n.network);p.setNonce(r)}return p}))}function T(t,e){return i(this,void 0,void 0,(function*(){if(t.payload.payloadType!==d.PayloadType.SmartContract)throw new Error(`Contract deploy fee estimation only possible with ${d.PayloadType[d.PayloadType.SmartContract]} transactions. Invoked with: ${d.PayloadType[t.payload.payloadType]}`);const n={method:"GET",headers:{Accept:"application/text"}},r=new s.StacksMainnet,i=e?e.getTransferFeeEstimateApiUrl():r.getTransferFeeEstimateApiUrl(),o=yield p.fetchPrivate(i,n);if(!o.ok){let t="";try{t=yield o.text()}catch(c){}throw new Error(`Error estimating contract deploy fee. Response ${o.status}: ${o.statusText}. Attempted to fetch ${i} and failed with the message: "${t}"`)}const a=yield o.text(),u=new y(t.serialize().byteLength);return new y(a).mul(u)}))}function M(t,e){return i(this,void 0,void 0,(function*(){if(t.payload.payloadType!==d.PayloadType.ContractCall)throw new Error(`Contract call fee estimation only possible with ${d.PayloadType[d.PayloadType.ContractCall]} transactions. Invoked with: ${d.PayloadType[t.payload.payloadType]}`);const n={method:"GET",headers:{Accept:"application/text"}},r=new s.StacksMainnet,i=e?e.getTransferFeeEstimateApiUrl():r.getTransferFeeEstimateApiUrl(),o=yield p.fetchPrivate(i,n);if(!o.ok){let t="";try{t=yield o.text()}catch(c){}throw new Error(`Error estimating contract call fee. Response ${o.status}: ${o.statusText}. Attempted to fetch ${i} and failed with the message: "${t}"`)}const a=yield o.text(),u=new y(t.serialize().byteLength);return new y(a).mul(u)}))}e.getNonce=w,e.estimateTransfer=v,e.broadcastTransaction=function(t,e){return i(this,void 0,void 0,(function*(){return S(t.serialize(),e.getBroadcastApiUrl())}))},e.broadcastRawTransaction=S,e.getAbi=b,e.makeUnsignedSTXTokenTransfer=C,e.makeSTXTokenTransfer=function(t){return i(this,void 0,void 0,(function*(){if("senderKey"in t){const e=c.publicKeyToString(c.getPublicKey(c.createStacksPrivateKey(t.senderKey))),n=p.omit(t,"senderKey"),r=yield C(Object.assign({publicKey:e},n)),i=c.createStacksPrivateKey(t.senderKey);return new h.TransactionSigner(r).signOrigin(i),r}{const e=p.omit(t,"signerKeys"),n=yield C(e),i=new h.TransactionSigner(n);let o=t.publicKeys;for(const r of t.signerKeys){const t=c.pubKeyfromPrivKey(r);o=o.filter((e=>e!==t.data.toString("hex"))),i.signOrigin(c.createStacksPrivateKey(r))}for(const t of o)i.appendOrigin(c.publicKeyFromBuffer(r.from(t,"hex")));return n}}))},e.estimateContractDeploy=T,e.makeContractDeploy=function(t){return i(this,void 0,void 0,(function*(){const e={fee:new y(0),nonce:new y(0),network:new s.StacksMainnet,anchorMode:d.AnchorMode.Any,postConditionMode:d.PostConditionMode.Deny,sponsored:!1},n=Object.assign(e,t),r=a.createSmartContractPayload(n.contractName,n.codeBody),i=d.AddressHashMode.SerializeP2PKH,l=c.createStacksPrivateKey(n.senderKey),p=c.getPublicKey(l);let g=null;const m=u.createSingleSigSpendingCondition(i,c.publicKeyToString(p),n.nonce,n.fee);g=n.sponsored?new u.SponsoredAuthorization(m):new u.StandardAuthorization(m);const v=[];n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((t=>{v.push(t)}));const S=f.createLPList(v),b=new o.StacksTransaction(n.network.version,g,r,S,n.postConditionMode,n.anchorMode,n.network.chainId);if(!t.fee){const t=yield T(b,n.network);b.setFee(t)}if(!t.nonce){const t=n.network.version===d.TransactionVersion.Mainnet?d.AddressVersion.MainnetSingleSig:d.AddressVersion.TestnetSingleSig,e=c.publicKeyToAddress(t,p),r=yield w(e,n.network);b.setNonce(r)}if(n.senderKey){new h.TransactionSigner(b).signOrigin(l)}return b}))},e.estimateContractFunctionCall=M,e.makeContractCall=function(t){return i(this,void 0,void 0,(function*(){const e={fee:new y(0),nonce:new y(0),network:new s.StacksMainnet,anchorMode:d.AnchorMode.Any,postConditionMode:d.PostConditionMode.Deny,sponsored:!1},n=Object.assign(e,t),r=a.createContractCallPayload(n.contractAddress,n.contractName,n.functionName,n.functionArgs);if(null===n||void 0===n?void 0:n.validateWithAbi){let t;if("boolean"===typeof n.validateWithAbi){if(!(null===n||void 0===n?void 0:n.network))throw new Error("Network option must be provided in order to validate with ABI");t=yield b(n.contractAddress,n.contractName,n.network)}else t=n.validateWithAbi;g.validateContractCall(r,t)}const i=d.AddressHashMode.SerializeP2PKH,l=c.createStacksPrivateKey(n.senderKey),p=c.getPublicKey(l);let m=null;const v=u.createSingleSigSpendingCondition(i,c.publicKeyToString(p),n.nonce,n.fee);m=n.sponsored?new u.SponsoredAuthorization(v):new u.StandardAuthorization(v);const S=[];n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((t=>{S.push(t)}));const C=f.createLPList(S),T=new o.StacksTransaction(n.network.version,m,r,C,n.postConditionMode,n.anchorMode,n.network.chainId);if(!t.fee){const t=yield M(T,n.network);T.setFee(t)}if(!t.nonce){const t=n.network.version===d.TransactionVersion.Mainnet?d.AddressVersion.MainnetSingleSig:d.AddressVersion.TestnetSingleSig,e=c.publicKeyToAddress(t,p),r=yield w(e,n.network);T.setNonce(r)}if(n.senderKey){new h.TransactionSigner(T).signOrigin(l)}return T}))},e.makeStandardSTXPostCondition=function(t,e,n){return l.createSTXPostCondition(f.createStandardPrincipal(t),e,n)},e.makeContractSTXPostCondition=function(t,e,n,r){return l.createSTXPostCondition(f.createContractPrincipal(t,e),n,r)},e.makeStandardFungiblePostCondition=function(t,e,n,r){return l.createFungiblePostCondition(f.createStandardPrincipal(t),e,n,r)},e.makeContractFungiblePostCondition=function(t,e,n,r,i){return l.createFungiblePostCondition(f.createContractPrincipal(t,e),n,r,i)},e.makeStandardNonFungiblePostCondition=function(t,e,n,r){return l.createNonFungiblePostCondition(f.createStandardPrincipal(t),e,n,r)},e.makeContractNonFungiblePostCondition=function(t,e,n,r,i){return l.createNonFungiblePostCondition(f.createContractPrincipal(t,e),n,r,i)},e.callReadOnlyFunction=function(t){return i(this,void 0,void 0,(function*(){const e={network:new s.StacksMainnet},n=Object.assign(e,t),{contractName:r,contractAddress:i,functionName:o,functionArgs:a,network:u,senderAddress:c}=n,h=u.getReadOnlyFunctionCallApiUrl(i,r,o),l=a.map((t=>p.cvToHex(t))),d=JSON.stringify({sender:c,arguments:l}),f=yield p.fetchPrivate(h,{method:"POST",body:d,headers:{"Content-Type":"application/json"}});if(!f.ok){let t="";try{t=yield f.text()}catch(y){}throw new Error(`Error calling read-only function. Response ${f.status}: ${f.statusText}. Attempted to fetch ${h} and failed with the message: "${t}"`)}return f.json().then((t=>p.parseReadOnlyResponse(t)))}))},e.sponsorTransaction=function(t){var e;return i(this,void 0,void 0,(function*(){const n={fee:new y(0),sponsorNonce:new y(0),sponsorAddressHashmode:d.AddressHashMode.SerializeP2PKH},r=Object.assign(n,t),i=null!==(e=t.network)&&void 0!==e?e:r.transaction.version===d.TransactionVersion.Mainnet?new s.StacksMainnet:new s.StacksTestnet,o=c.pubKeyfromPrivKey(r.sponsorPrivateKey);if(!t.fee){let t=new y(0);switch(r.transaction.payload.payloadType){case d.PayloadType.TokenTransfer:t=yield v(r.transaction,i);break;case d.PayloadType.SmartContract:t=yield T(r.transaction,i);break;case d.PayloadType.ContractCall:t=yield M(r.transaction,i);break;default:throw new Error(`Spnsored transactions not supported for transaction type ${d.PayloadType[r.transaction.payload.payloadType]}`)}r.transaction.setFee(t),r.fee=t}if(!t.sponsorNonce){const t=i.version===d.TransactionVersion.Mainnet?d.AddressVersion.MainnetSingleSig:d.AddressVersion.TestnetSingleSig,e=c.publicKeyToAddress(t,o),n=yield w(e,i);r.sponsorNonce=n}const a=u.createSingleSigSpendingCondition(r.sponsorAddressHashmode,c.publicKeyToString(o),r.sponsorNonce,r.fee);r.transaction.setSponsor(a);const l=c.createStacksPrivateKey(r.sponsorPrivateKey);return h.TransactionSigner.createSponsorSigner(r.transaction,a).signSponsor(l),r.transaction}))}},59810:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getCVTypeString=e.cvToString=e.ClarityType=void 0;const i=n(3018),o=n(39954);var s;!function(t){t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple",t[t.StringASCII=13]="StringASCII",t[t.StringUTF8=14]="StringUTF8"}(s=e.ClarityType||(e.ClarityType={})),e.cvToString=function t(e,n="tryAscii"){switch(e.type){case s.BoolTrue:return"true";case s.BoolFalse:return"false";case s.Int:return e.value.fromTwos(o.CLARITY_INT_SIZE).toString();case s.UInt:return`u${e.value.toString()}`;case s.Buffer:if("tryAscii"===n){const t=e.buffer.toString("ascii");if(/[ -~]/.test(t))return JSON.stringify(t)}return`0x${e.buffer.toString("hex")}`;case s.OptionalNone:return"none";case s.OptionalSome:return`(some ${t(e.value,n)})`;case s.ResponseErr:return`(err ${t(e.value,n)})`;case s.ResponseOk:return`(ok ${t(e.value,n)})`;case s.PrincipalStandard:case s.PrincipalContract:return i.principalToString(e);case s.List:return`(list ${e.list.map((e=>t(e,n))).join(" ")})`;case s.Tuple:return`(tuple ${Object.keys(e.data).map((r=>`(${r} ${t(e.data[r],n)})`)).join(" ")})`;case s.StringASCII:return`"${e.data}"`;case s.StringUTF8:return`u"${e.data}"`}},e.getCVTypeString=function t(e){switch(e.type){case s.BoolTrue:case s.BoolFalse:return"bool";case s.Int:return"int";case s.UInt:return"uint";case s.Buffer:return`(buff ${e.buffer.length})`;case s.OptionalNone:return"(optional none)";case s.OptionalSome:return`(optional ${t(e.value)})`;case s.ResponseErr:return`(responseError ${t(e.value)})`;case s.ResponseOk:return`(responseOk ${t(e.value)})`;case s.PrincipalStandard:case s.PrincipalContract:return"principal";case s.List:return`(list ${e.list.length} ${t(e.list[0])})`;case s.Tuple:return`(tuple ${Object.keys(e.data).map((n=>`(${n} ${t(e.data[n])})`)).join(" ")})`;case s.StringASCII:return`(string-ascii ${r.from(e.data,"ascii").length})`;case s.StringUTF8:return`(string-utf8 ${r.from(e.data,"utf8").length})`}}},4315:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0});const i=n(48041),o=n(49880),s=n(67327),a=n(8982),u=n(50657);e.default=function t(e){const n=r.isBuffer(e)?new o.BufferReader(e):e;switch(n.readUInt8Enum(i.ClarityType,(t=>{throw new a.DeserializationError(`Cannot recognize Clarity Type: ${t}`)}))){case i.ClarityType.Int:return i.intCV(n.readBuffer(16));case i.ClarityType.UInt:return i.uintCV(n.readBuffer(16));case i.ClarityType.Buffer:const e=n.readUInt32BE();return i.bufferCV(n.readBuffer(e));case i.ClarityType.BoolTrue:return i.trueCV();case i.ClarityType.BoolFalse:return i.falseCV();case i.ClarityType.PrincipalStandard:const r=s.deserializeAddress(n);return i.standardPrincipalCVFromAddress(r);case i.ClarityType.PrincipalContract:const o=s.deserializeAddress(n),c=s.deserializeLPString(n);return i.contractPrincipalCVFromAddress(o,c);case i.ClarityType.ResponseOk:return i.responseOkCV(t(n));case i.ClarityType.ResponseErr:return i.responseErrorCV(t(n));case i.ClarityType.OptionalNone:return i.noneCV();case i.ClarityType.OptionalSome:return i.someCV(t(n));case i.ClarityType.List:const h=n.readUInt32BE(),l=[];for(let i=0;i<h;i++)l.push(t(n));return i.listCV(l);case i.ClarityType.Tuple:const d=n.readUInt32BE(),f={};for(let i=0;i<d;i++){const e=s.deserializeLPString(n).content;if(void 0===e)throw new a.DeserializationError('"content" is undefined');f[e]=t(n)}return i.tupleCV(f);case i.ClarityType.StringASCII:const p=n.readUInt32BE(),y=n.readBuffer(p).toString("ascii");return u.stringAsciiCV(y);case i.ClarityType.StringUTF8:const g=n.readUInt32BE(),m=n.readBuffer(g).toString("utf8");return u.stringUtf8CV(m);default:throw new a.DeserializationError("Unable to deserialize Clarity Value from buffer. Could not find valid Clarity Type.")}}},48041:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cvToString=e.deserializeCV=e.serializeCV=e.getCVTypeString=e.stringUtf8CV=e.stringAsciiCV=e.tupleCV=e.listCV=e.contractPrincipalCVFromStandard=e.contractPrincipalCVFromAddress=e.contractPrincipalCV=e.standardPrincipalCVFromAddress=e.standardPrincipalCV=e.responseErrorCV=e.responseOkCV=e.someCV=e.noneCV=e.bufferCVFromString=e.bufferCV=e.uintCV=e.intCV=e.falseCV=e.trueCV=e.ClarityType=void 0;const r=n(59810);Object.defineProperty(e,"ClarityType",{enumerable:!0,get:function(){return r.ClarityType}}),Object.defineProperty(e,"getCVTypeString",{enumerable:!0,get:function(){return r.getCVTypeString}}),Object.defineProperty(e,"cvToString",{enumerable:!0,get:function(){return r.cvToString}});const i=n(58710);Object.defineProperty(e,"trueCV",{enumerable:!0,get:function(){return i.trueCV}}),Object.defineProperty(e,"falseCV",{enumerable:!0,get:function(){return i.falseCV}});const o=n(62728);Object.defineProperty(e,"intCV",{enumerable:!0,get:function(){return o.intCV}}),Object.defineProperty(e,"uintCV",{enumerable:!0,get:function(){return o.uintCV}});const s=n(79567);Object.defineProperty(e,"bufferCV",{enumerable:!0,get:function(){return s.bufferCV}}),Object.defineProperty(e,"bufferCVFromString",{enumerable:!0,get:function(){return s.bufferCVFromString}});const a=n(5916);Object.defineProperty(e,"noneCV",{enumerable:!0,get:function(){return a.noneCV}}),Object.defineProperty(e,"someCV",{enumerable:!0,get:function(){return a.someCV}});const u=n(68380);Object.defineProperty(e,"responseOkCV",{enumerable:!0,get:function(){return u.responseOkCV}}),Object.defineProperty(e,"responseErrorCV",{enumerable:!0,get:function(){return u.responseErrorCV}});const c=n(3018);Object.defineProperty(e,"standardPrincipalCV",{enumerable:!0,get:function(){return c.standardPrincipalCV}}),Object.defineProperty(e,"contractPrincipalCV",{enumerable:!0,get:function(){return c.contractPrincipalCV}}),Object.defineProperty(e,"standardPrincipalCVFromAddress",{enumerable:!0,get:function(){return c.standardPrincipalCVFromAddress}}),Object.defineProperty(e,"contractPrincipalCVFromAddress",{enumerable:!0,get:function(){return c.contractPrincipalCVFromAddress}}),Object.defineProperty(e,"contractPrincipalCVFromStandard",{enumerable:!0,get:function(){return c.contractPrincipalCVFromStandard}});const h=n(96839);Object.defineProperty(e,"listCV",{enumerable:!0,get:function(){return h.listCV}});const l=n(95194);Object.defineProperty(e,"tupleCV",{enumerable:!0,get:function(){return l.tupleCV}});const d=n(50657);Object.defineProperty(e,"stringUtf8CV",{enumerable:!0,get:function(){return d.stringUtf8CV}}),Object.defineProperty(e,"stringAsciiCV",{enumerable:!0,get:function(){return d.stringAsciiCV}});const f=n(47964);Object.defineProperty(e,"serializeCV",{enumerable:!0,get:function(){return f.serializeCV}});const p=n(4315);e.deserializeCV=p.default},47964:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.serializeCV=void 0;const i=n(67327),o=n(48041),s=n(40517),a=n(8982);function u(t,e){const n=r.from([t]);return r.concat([n,e])}function c(t,e){const n=new s.BufferArray,i=r.from(t.data,e),o=r.alloc(4);return o.writeUInt32BE(i.length),n.push(o),n.push(i),u(t.type,n.concatBuffer())}function h(t){switch(t.type){case o.ClarityType.BoolTrue:case o.ClarityType.BoolFalse:return function(t){return r.from([t.type])}(t);case o.ClarityType.OptionalNone:case o.ClarityType.OptionalSome:return(e=t).type===o.ClarityType.OptionalNone?r.from([e.type]):u(e.type,h(e.value));case o.ClarityType.Buffer:return function(t){const e=r.alloc(4);return e.writeUInt32BE(t.buffer.length,0),u(t.type,r.concat([e,t.buffer]))}(t);case o.ClarityType.Int:case o.ClarityType.UInt:return function(t){const e=t.value.toArrayLike(r,"be",16);return u(t.type,e)}(t);case o.ClarityType.PrincipalStandard:return function(t){return u(t.type,i.serializeAddress(t.address))}(t);case o.ClarityType.PrincipalContract:return function(t){return u(t.type,r.concat([i.serializeAddress(t.address),i.serializeLPString(t.contractName)]))}(t);case o.ClarityType.ResponseOk:case o.ClarityType.ResponseErr:return function(t){return u(t.type,h(t.value))}(t);case o.ClarityType.List:return function(t){const e=new s.BufferArray,n=r.alloc(4);n.writeUInt32BE(t.list.length,0),e.push(n);for(const r of t.list){const t=h(r);e.push(t)}return u(t.type,e.concatBuffer())}(t);case o.ClarityType.Tuple:return function(t){const e=new s.BufferArray,n=r.alloc(4);n.writeUInt32BE(Object.keys(t.data).length,0),e.push(n);const o=Object.keys(t.data).sort(((t,e)=>{const n=r.from(t),i=r.from(e);return n.compare(i)}));for(const r of o){const n=i.createLPString(r);e.push(i.serializeLPString(n));const o=h(t.data[r]);e.push(o)}return u(t.type,e.concatBuffer())}(t);case o.ClarityType.StringASCII:return function(t){return c(t,"ascii")}(t);case o.ClarityType.StringUTF8:return function(t){return c(t,"utf8")}(t);default:throw new a.SerializationError("Unable to serialize. Invalid Clarity Value.")}var e}e.serializeCV=h},58710:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.falseCV=e.trueCV=void 0;const r=n(59810);e.trueCV=()=>({type:r.ClarityType.BoolTrue});e.falseCV=()=>({type:r.ClarityType.BoolFalse})},79567:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCVFromString=e.bufferCV=void 0;const i=n(59810),o=t=>{if(t.length>1e6)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:i.ClarityType.Buffer,buffer:t}};e.bufferCV=o;e.bufferCVFromString=t=>o(r.from(t))},62728:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uintCV=e.intCV=void 0;const r=n(31318),i=n(39954),o=n(59810);e.intCV=t=>{const e=new r(t).toTwos(i.CLARITY_INT_SIZE);if(e.bitLength()>i.CLARITY_INT_SIZE)throw new Error("Cannot construct clarity integer from value greater than INT_SIZE bits");return{type:o.ClarityType.Int,value:e}};e.uintCV=t=>{const e=new r(t).toTwos(i.CLARITY_INT_SIZE);if(e.isNeg())throw new Error("Cannot construct unsigned clarity integer from negative value");if(e.bitLength()>i.CLARITY_INT_SIZE)throw new Error("Cannot construct unsigned clarity integer from value greater than 128 bits");return{type:o.ClarityType.UInt,value:e}}},96839:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.listCV=void 0;const r=n(59810);e.listCV=function(t){return{type:r.ClarityType.List,list:t}}},5916:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optionalCVOf=e.someCV=e.noneCV=void 0;const r=n(59810),i=()=>({type:r.ClarityType.OptionalNone});e.noneCV=i;const o=t=>({type:r.ClarityType.OptionalSome,value:t});e.someCV=o;e.optionalCVOf=t=>t?o(t):i()},3018:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.contractPrincipalCVFromStandard=e.contractPrincipalCVFromAddress=e.contractPrincipalCV=e.standardPrincipalCVFromAddress=e.standardPrincipalCV=e.principalToString=e.principalCV=void 0;const i=n(67327),o=n(59810);function s(t){const e=i.createAddress(t);return{type:o.ClarityType.PrincipalStandard,address:e}}function a(t,e){return u(i.createAddress(t),i.createLPString(e))}function u(t,e){if(r.byteLength(e.content)>=128)throw new Error("Contract name must be less than 128 bytes");return{type:o.ClarityType.PrincipalContract,address:t,contractName:e}}e.principalToString=function(t){if(t.type===o.ClarityType.PrincipalStandard)return i.addressToString(t.address);if(t.type===o.ClarityType.PrincipalContract){return`${i.addressToString(t.address)}.${t.contractName.content}`}throw new Error(`Unexpected principal data: ${JSON.stringify(t)}`)},e.principalCV=function(t){if(t.includes(".")){const[e,n]=t.split(".");return a(e,n)}return s(t)},e.standardPrincipalCV=s,e.standardPrincipalCVFromAddress=function(t){return{type:o.ClarityType.PrincipalStandard,address:t}},e.contractPrincipalCV=a,e.contractPrincipalCVFromAddress=u,e.contractPrincipalCVFromStandard=function(t,e){const n=i.createLPString(e);return{type:o.ClarityType.PrincipalContract,address:t.address,contractName:n}}},68380:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.responseOkCV=e.responseErrorCV=void 0;const r=n(59810);e.responseErrorCV=function(t){return{type:r.ClarityType.ResponseErr,value:t}},e.responseOkCV=function(t){return{type:r.ClarityType.ResponseOk,value:t}}},50657:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringCV=e.stringUtf8CV=e.stringAsciiCV=void 0;const r=n(59810),i=t=>({type:r.ClarityType.StringASCII,data:t});e.stringAsciiCV=i;e.stringUtf8CV=t=>({type:r.ClarityType.StringUTF8,data:t});e.stringCV=(t,e)=>{switch(e){case"ascii":case"utf8":return i(t)}}},95194:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tupleCV=void 0;const r=n(59810),i=n(40517);e.tupleCV=function(t){for(const e in t)if(!i.isClarityName(e))throw new Error(`"${e}" is not a valid Clarity name`);return{type:r.ClarityType.Tuple,data:t}}},39954:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TxRejectedReason=e.AssetType=e.NonFungibleConditionCode=e.FungibleConditionCode=e.PubKeyEncoding=e.AddressVersion=e.AddressHashMode=e.AuthType=e.PostConditionPrincipalID=e.PostConditionType=e.PostConditionMode=e.TransactionVersion=e.AnchorMode=e.PayloadType=e.StacksMessageType=e.ChainID=e.DEFAULT_CORE_NODE_API_URL=e.MEMO_MAX_LENGTH_BYTES=e.UNCOMPRESSED_PUBKEY_LENGTH_BYTES=e.COMPRESSED_PUBKEY_LENGTH_BYTES=e.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES=e.DEFAULT_TRANSACTION_VERSION=e.DEFAULT_CHAIN_ID=e.COINBASE_BUFFER_LENGTH_BYTES=e.CLARITY_INT_SIZE=e.MAX_STRING_LENGTH_BYTES=void 0,function(t){t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet"}(n||(n={})),e.ChainID=n;const r=n.Mainnet;e.DEFAULT_CHAIN_ID=r;e.MAX_STRING_LENGTH_BYTES=128;e.CLARITY_INT_SIZE=128;e.COINBASE_BUFFER_LENGTH_BYTES=32;e.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES=65;e.COMPRESSED_PUBKEY_LENGTH_BYTES=32;e.UNCOMPRESSED_PUBKEY_LENGTH_BYTES=64;e.MEMO_MAX_LENGTH_BYTES=34;var i,o,s,a;e.DEFAULT_CORE_NODE_API_URL="https://core.blockstack.org",function(t){t[t.Address=0]="Address",t[t.Principal=1]="Principal",t[t.LengthPrefixedString=2]="LengthPrefixedString",t[t.MemoString=3]="MemoString",t[t.AssetInfo=4]="AssetInfo",t[t.PostCondition=5]="PostCondition",t[t.PublicKey=6]="PublicKey",t[t.LengthPrefixedList=7]="LengthPrefixedList",t[t.Payload=8]="Payload",t[t.MessageSignature=9]="MessageSignature",t[t.TransactionAuthField=10]="TransactionAuthField"}(i||(i={})),e.StacksMessageType=i,function(t){t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase"}(o||(o={})),e.PayloadType=o,function(t){t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any"}(s||(s={})),e.AnchorMode=s,function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"}(a||(a={})),e.TransactionVersion=a;const u=a.Mainnet;var c,h,l,d,f,p,y,g,m,w,v,S;e.DEFAULT_TRANSACTION_VERSION=u,function(t){t[t.Allow=1]="Allow",t[t.Deny=2]="Deny"}(c||(c={})),e.PostConditionMode=c,function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"}(h||(h={})),e.PostConditionType=h,function(t){t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored"}(l||(l={})),e.AuthType=l,function(t){t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH"}(d||(d={})),e.AddressHashMode=d,function(t){t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig"}(f||(f={})),e.AddressVersion=f,function(t){t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed"}(p||(p={})),e.PubKeyEncoding=p,function(t){t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual"}(y||(y={})),e.FungibleConditionCode=y,function(t){t[t.DoesNotOwn=16]="DoesNotOwn",t[t.Owns=17]="Owns"}(g||(g={})),e.NonFungibleConditionCode=g,function(t){t[t.Origin=1]="Origin",t[t.Standard=2]="Standard",t[t.Contract=3]="Contract"}(m||(m={})),e.PostConditionPrincipalID=m,function(t){t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible"}(w||(w={})),e.AssetType=w,function(t){t[t.Int=0]="Int",t[t.UInt=1]="UInt",t[t.Buffer=2]="Buffer",t[t.BoolTrue=3]="BoolTrue",t[t.BoolFalse=4]="BoolFalse",t[t.PrincipalStandard=5]="PrincipalStandard",t[t.PrincipalContract=6]="PrincipalContract",t[t.ResponseOk=7]="ResponseOk",t[t.ResponseErr=8]="ResponseErr",t[t.OptionalNone=9]="OptionalNone",t[t.OptionalSome=10]="OptionalSome",t[t.List=11]="List",t[t.Tuple=12]="Tuple"}(v||(v={})),function(t){t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther"}(S||(S={})),e.TxRejectedReason=S},54713:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.parseToCV=e.validateContractCall=e.abiFunctionToString=e.getTypeString=e.encodeClarityValue=e.getTypeUnion=e.isClarityAbiList=e.isClarityAbiTuple=e.isClarityAbiOptional=e.isClarityAbiResponse=e.isClarityAbiStringUtf8=e.isClarityAbiStringAscii=e.isClarityAbiBuffer=e.isClarityAbiPrimitive=e.ClarityAbiTypeId=void 0;const i=n(40517),o=n(48041),s=n(8982),a=n(50657);var u;function c(t){if(e.isClarityAbiPrimitive(t)){if("uint128"===t)return{id:u.ClarityAbiTypeUInt128,type:t};if("int128"===t)return{id:u.ClarityAbiTypeInt128,type:t};if("bool"===t)return{id:u.ClarityAbiTypeBool,type:t};if("principal"===t)return{id:u.ClarityAbiTypePrincipal,type:t};if("none"===t)return{id:u.ClarityAbiTypeNone,type:t};throw new Error(`Unexpected Clarity ABI type primitive: ${JSON.stringify(t)}`)}if(e.isClarityAbiBuffer(t))return{id:u.ClarityAbiTypeBuffer,type:t};if(e.isClarityAbiResponse(t))return{id:u.ClarityAbiTypeResponse,type:t};if(e.isClarityAbiOptional(t))return{id:u.ClarityAbiTypeOptional,type:t};if(e.isClarityAbiTuple(t))return{id:u.ClarityAbiTypeTuple,type:t};if(e.isClarityAbiList(t))return{id:u.ClarityAbiTypeList,type:t};if(e.isClarityAbiStringAscii(t))return{id:u.ClarityAbiTypeStringAscii,type:t};if(e.isClarityAbiStringUtf8(t))return{id:u.ClarityAbiTypeStringUtf8,type:t};throw new Error(`Unexpected Clarity ABI type: ${JSON.stringify(t)}`)}function h(t){if(e.isClarityAbiPrimitive(t))return"int128"===t?"int":"uint128"===t?"uint":t;if(e.isClarityAbiBuffer(t))return`(buff ${t.buffer.length})`;if(e.isClarityAbiStringAscii(t))return`(string-ascii ${t["string-ascii"].length})`;if(e.isClarityAbiStringUtf8(t))return`(string-utf8 ${t["string-utf8"].length})`;if(e.isClarityAbiResponse(t))return`(response ${h(t.response.ok)} ${h(t.response.error)})`;if(e.isClarityAbiOptional(t))return`(optional ${h(t.optional)})`;if(e.isClarityAbiTuple(t))return`(tuple ${t.tuple.map((t=>`(${t.name} ${h(t.type)})`)).join(" ")})`;if(e.isClarityAbiList(t))return`(list ${t.list.length} ${h(t.list.type)})`;throw new Error(`Type string unsupported for Clarity type: ${JSON.stringify(t)}`)}function l(t,e){const n=c(e);switch(t.type){case o.ClarityType.BoolTrue:case o.ClarityType.BoolFalse:return n.id===u.ClarityAbiTypeBool;case o.ClarityType.Int:return n.id===u.ClarityAbiTypeInt128;case o.ClarityType.UInt:return n.id===u.ClarityAbiTypeUInt128;case o.ClarityType.Buffer:return n.id===u.ClarityAbiTypeBuffer&&n.type.buffer.length>=t.buffer.length;case o.ClarityType.StringASCII:return n.id===u.ClarityAbiTypeStringAscii&&n.type["string-ascii"].length>=t.data.length;case o.ClarityType.StringUTF8:return n.id===u.ClarityAbiTypeStringUtf8&&n.type["string-utf8"].length>=t.data.length;case o.ClarityType.OptionalNone:return n.id===u.ClarityAbiTypeNone||n.id===u.ClarityAbiTypeOptional;case o.ClarityType.OptionalSome:return n.id===u.ClarityAbiTypeOptional&&l(t.value,n.type.optional);case o.ClarityType.ResponseErr:return n.id===u.ClarityAbiTypeResponse&&l(t.value,n.type.response.error);case o.ClarityType.ResponseOk:return n.id===u.ClarityAbiTypeResponse&&l(t.value,n.type.response.ok);case o.ClarityType.PrincipalContract:case o.ClarityType.PrincipalStandard:return n.id===u.ClarityAbiTypePrincipal;case o.ClarityType.List:return n.id==u.ClarityAbiTypeList&&n.type.list.length===t.list.length&&t.list.every((t=>l(t,n.type.list.type)));case o.ClarityType.Tuple:if(n.id==u.ClarityAbiTypeTuple){const e=i.cloneDeep(t.data);for(let t=0;t<n.type.tuple.length;t++){const r=n.type.tuple[t],i=r.name,o=e[i];if(!o)return!1;if(!l(o,r.type))return!1;delete e[i]}return!0}default:return!1}}!function(t){t[t.ClarityAbiTypeUInt128=1]="ClarityAbiTypeUInt128",t[t.ClarityAbiTypeInt128=2]="ClarityAbiTypeInt128",t[t.ClarityAbiTypeBool=3]="ClarityAbiTypeBool",t[t.ClarityAbiTypePrincipal=4]="ClarityAbiTypePrincipal",t[t.ClarityAbiTypeNone=5]="ClarityAbiTypeNone",t[t.ClarityAbiTypeBuffer=6]="ClarityAbiTypeBuffer",t[t.ClarityAbiTypeResponse=7]="ClarityAbiTypeResponse",t[t.ClarityAbiTypeOptional=8]="ClarityAbiTypeOptional",t[t.ClarityAbiTypeTuple=9]="ClarityAbiTypeTuple",t[t.ClarityAbiTypeList=10]="ClarityAbiTypeList",t[t.ClarityAbiTypeStringAscii=11]="ClarityAbiTypeStringAscii",t[t.ClarityAbiTypeStringUtf8=12]="ClarityAbiTypeStringUtf8"}(u=e.ClarityAbiTypeId||(e.ClarityAbiTypeId={})),e.isClarityAbiPrimitive=t=>"string"===typeof t,e.isClarityAbiBuffer=t=>void 0!==t.buffer,e.isClarityAbiStringAscii=t=>void 0!==t["string-ascii"],e.isClarityAbiStringUtf8=t=>void 0!==t["string-utf8"],e.isClarityAbiResponse=t=>void 0!==t.response,e.isClarityAbiOptional=t=>void 0!==t.optional,e.isClarityAbiTuple=t=>void 0!==t.tuple,e.isClarityAbiList=t=>void 0!==t.list,e.getTypeUnion=c,e.encodeClarityValue=function(t,e){let n;switch(n=void 0!==t.id?t:c(t),n.id){case u.ClarityAbiTypeUInt128:return o.uintCV(e);case u.ClarityAbiTypeInt128:return o.intCV(e);case u.ClarityAbiTypeBool:if("false"===e||"0"===e)return o.falseCV();if("true"===e||"1"===e)return o.trueCV();throw new Error(`Unexpected Clarity bool value: ${JSON.stringify(e)}`);case u.ClarityAbiTypePrincipal:if(e.includes(".")){const[t,n]=e.split(".");return o.contractPrincipalCV(t,n)}return o.standardPrincipalCV(e);case u.ClarityAbiTypeNone:return o.noneCV();case u.ClarityAbiTypeBuffer:return o.bufferCV(r.from(e,"utf8"));case u.ClarityAbiTypeStringAscii:return a.stringAsciiCV(e);case u.ClarityAbiTypeStringUtf8:return a.stringUtf8CV(e);case u.ClarityAbiTypeResponse:case u.ClarityAbiTypeOptional:case u.ClarityAbiTypeTuple:case u.ClarityAbiTypeList:throw new s.NotImplementedError(`Unsupported encoding for Clarity type: ${n.id}`);default:throw new Error(`Unexpected Clarity type ID: ${JSON.stringify(n)}`)}},e.getTypeString=h,e.abiFunctionToString=function(t){return`(define-${"read_only"===t.access?"read-only":t.access} (${t.name} ${t.args.map((t=>`(${t.name} ${h(t.type)})`)).join(" ")}))`},e.validateContractCall=function(t,e){const n=e.functions.filter((e=>e.name===t.functionName.content));if(1===n.length){const e=n[0].args;if(t.functionArgs.length!==e.length)throw new Error(`Clarity function expects ${e.length} argument(s) but received ${t.functionArgs.length}`);for(let n=0;n<t.functionArgs.length;n++){const r=t.functionArgs[n],i=e[n];if(!l(r,i.type)){const e=n+1;throw new Error(`Clarity function \`${t.functionName.content}\` expects argument ${e} to be of type ${h(i.type)}, not ${o.getCVTypeString(r)}`)}}return!0}throw 0===n.length?new Error(`ABI doesn't contain a function with the name ${t.functionName.content}`):new Error(`Malformed ABI. Contains multiple functions with the name ${t.functionName.content}`)},e.parseToCV=function(t,n){const i=h(n);if(e.isClarityAbiPrimitive(n)){if("uint128"===n)return o.uintCV(t);if("int128"===n)return o.intCV(t);if("bool"===n){if("true"===t.toLowerCase())return o.trueCV();if("false"===t.toLowerCase())return o.falseCV();throw new Error(`Invalid bool value: ${t}`)}if("principal"===n){if(t.includes(".")){const[e,n]=t.split(".");return o.contractPrincipalCV(e,n)}return o.standardPrincipalCV(t)}throw new Error(`Contract function contains unsupported Clarity ABI type: ${i}`)}if(e.isClarityAbiBuffer(n)){if(r.from(t).byteLength>n.buffer.length)throw new Error(`Input exceeds specified buffer length limit of ${n.buffer.length}`);return o.bufferCVFromString(t)}throw e.isClarityAbiResponse(n)||e.isClarityAbiOptional(n)||e.isClarityAbiTuple(n)||e.isClarityAbiList(n),new Error(`Contract function contains unsupported Clarity ABI type: ${i}`)}},8982:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VerificationError=e.SigningError=e.NotImplementedError=e.DeserializationError=e.SerializationError=e.StacksTransactionError=void 0;class n extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.StacksTransactionError=n;class r extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.SerializationError=r;class i extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.DeserializationError=i;class o extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.NotImplementedError=o;class s extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.SigningError=s;class a extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.VerificationError=a},74068:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(71905);Object.defineProperty(e,"StacksTransaction",{enumerable:!0,get:function(){return o.StacksTransaction}});var s=n(64418);Object.defineProperty(e,"Authorization",{enumerable:!0,get:function(){return s.Authorization}}),Object.defineProperty(e,"StandardAuthorization",{enumerable:!0,get:function(){return s.StandardAuthorization}}),Object.defineProperty(e,"SponsoredAuthorization",{enumerable:!0,get:function(){return s.SponsoredAuthorization}});var a=n(41059);Object.defineProperty(e,"createFungiblePostCondition",{enumerable:!0,get:function(){return a.createFungiblePostCondition}}),Object.defineProperty(e,"createNonFungiblePostCondition",{enumerable:!0,get:function(){return a.createNonFungiblePostCondition}}),Object.defineProperty(e,"createSTXPostCondition",{enumerable:!0,get:function(){return a.createSTXPostCondition}}),i(n(48041),e),i(n(61325),e),i(n(45118),e),i(n(62807),e),i(n(67327),e),i(n(39954),e),i(n(54713),e),i(n(15532),e)},61325:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.publicKeyToAddress=e.privateKeyToString=e.getPublicKey=e.parseRecoverableSignature=e.getSignatureRecoveryParam=e.signWithKey=e.makeRandomPrivKey=e.createStacksPrivateKey=e.deserializePublicKey=e.pubKeyfromPrivKey=e.serializePublicKey=e.publicKeyToString=e.isCompressed=e.publicKeyFromBuffer=e.publicKeyFromSignature=e.createStacksPublicKey=e.getAddressFromPublicKey=e.getAddressFromPrivateKey=void 0;const i=n(39954),o=n(40517),s=n(86266),a=n(64418),u=n(27701),c=n(67327);function h(t,e=i.TransactionVersion.Mainnet){t="string"===typeof t?t:t.toString("hex");const n=c.addressHashModeToVersion(i.AddressHashMode.SerializeP2PKH,e),s=c.addressFromVersionHash(n,o.hashP2PKH(r.from(t,"hex")));return c.addressToString(s)}function l(t){return{type:i.StacksMessageType.PublicKey,data:r.from(t,"hex")}}function d(t){return{type:i.StacksMessageType.PublicKey,data:t}}function f(t){const e=p(t);return l(new s.ec("secp256k1").keyFromPrivate(e.data.toString("hex").slice(0,64),"hex").getPublic(e.compressed,"hex"))}function p(t){const e="string"===typeof t?r.from(t,"hex"):t;let n;if(33===e.length){if(1!==e[e.length-1])throw new Error("Improperly formatted private-key. 33 byte length usually indicates compressed key, but last byte must be == 0x01");n=!0}else{if(32!==e.length)throw new Error(`Improperly formatted private-key hex string: length should be 32 or 33 bytes, provided with length ${e.length}`);n=!1}return{data:e,compressed:n}}function y(t){if(t.length<129)throw new Error("Invalid signature");const e=t.substr(0,2),n=t.substr(2,64),r=t.substr(66,64);return{recoveryParam:o.hexStringToInt(e),r:n,s:r}}e.getAddressFromPrivateKey=function(t,e=i.TransactionVersion.Mainnet){return h(f(t).data,e)},e.getAddressFromPublicKey=h,e.createStacksPublicKey=l,e.publicKeyFromSignature=function(t,e){const n=new s.ec("secp256k1"),r=n.keyFromPrivate(t,"hex").getPrivate().toString(10),i=y(e.data);return n.recoverPubKey(r,i,i.recoveryParam,"hex").encodeCompressed("hex")},e.publicKeyFromBuffer=d,e.isCompressed=function(t){return!t.data.toString("hex").startsWith("04")},e.publicKeyToString=function(t){return t.data.toString("hex")},e.serializePublicKey=function(t){const e=new o.BufferArray;return e.push(t.data),e.concatBuffer()},e.pubKeyfromPrivKey=f,e.deserializePublicKey=function(t){const e=t.readUInt8(),n=4!==e?i.COMPRESSED_PUBKEY_LENGTH_BYTES:i.UNCOMPRESSED_PUBKEY_LENGTH_BYTES;return d(r.concat([r.from([e]),t.readBuffer(n)]))},e.createStacksPrivateKey=p,e.makeRandomPrivKey=function(){const t=new s.ec("secp256k1"),e={entropy:o.randomBytes(32)};return p(t.genKeyPair(e).getPrivate().toString("hex",32))},e.signWithKey=function(t,e){const n=new s.ec("secp256k1").keyFromPrivate(t.data.toString("hex").slice(0,64),"hex").sign(e,"hex",{canonical:!0}),r=o.leftPadHexToLength(n.r.toString("hex"),64),i=o.leftPadHexToLength(n.s.toString("hex"),64);if(void 0===n.recoveryParam||null===n.recoveryParam)throw new Error('"signature.recoveryParam" is not set');const u=o.intToHexString(n.recoveryParam,1)+r+i;return a.createMessageSignature(u)},e.getSignatureRecoveryParam=function(t){if(t.length<129)throw new Error("Invalid signature");const e=t.substr(0,2);return o.hexStringToInt(e)},e.parseRecoverableSignature=y,e.getPublicKey=function(t){return f(t.data)},e.privateKeyToString=function(t){return t.data.toString("hex")},e.publicKeyToAddress=function(t,e){return u.c32address(t,o.hash160(e.data).toString("hex"))}},62807:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StacksTestnet=e.StacksMainnet=void 0;const r=n(39954);class i{constructor(){this.version=r.TransactionVersion.Mainnet,this.chainId=r.ChainID.Mainnet,this.coreApiUrl="https://core.blockstack.org",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getAccountApiUrl=t=>`${this.coreApiUrl}${this.accountEndpoint}/${t}?proof=0`,this.getAbiApiUrl=(t,e)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${t}/${e}`,this.getReadOnlyFunctionCallApiUrl=(t,e,n)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${t}/${e}/${encodeURIComponent(n)}`}}e.StacksMainnet=i;e.StacksTestnet=class extends i{constructor(){super(...arguments),this.version=r.TransactionVersion.Testnet,this.chainId=r.ChainID.Testnet,this.coreApiUrl="http://testnet-master.blockstack.org:20443"}}},47541:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.deserializePayload=e.serializePayload=e.createCoinbasePayload=e.createPoisonPayload=e.createSmartContractPayload=e.createContractCallPayload=e.createTokenTransferPayload=void 0;const i=n(39954),o=n(40517),s=n(67327),a=n(48041),u=n(31318),c=n(3018);function h(t,e,n){return"string"===typeof t&&(t=c.principalCV(t)),"string"===typeof n&&(n=s.createMemoString(n)),{type:i.StacksMessageType.Payload,payloadType:i.PayloadType.TokenTransfer,recipient:t,amount:e,memo:null!==n&&void 0!==n?n:s.createMemoString("")}}function l(t,e,n,r){return"string"===typeof t&&(t=s.createAddress(t)),"string"===typeof e&&(e=s.createLPString(e)),"string"===typeof n&&(n=s.createLPString(n)),{type:i.StacksMessageType.Payload,payloadType:i.PayloadType.ContractCall,contractAddress:t,contractName:e,functionName:n,functionArgs:r}}function d(t,e){return"string"===typeof t&&(t=s.createLPString(t)),"string"===typeof e&&(e=s.codeBodyString(e)),{type:i.StacksMessageType.Payload,payloadType:i.PayloadType.SmartContract,contractName:t,codeBody:e}}function f(){return{type:i.StacksMessageType.Payload,payloadType:i.PayloadType.PoisonMicroblock}}function p(t){if(t.byteLength!=i.COINBASE_BUFFER_LENGTH_BYTES)throw Error(`Coinbase buffer size must be ${i.COINBASE_BUFFER_LENGTH_BYTES} bytes`);return{type:i.StacksMessageType.Payload,payloadType:i.PayloadType.Coinbase,coinbaseBuffer:t}}e.createTokenTransferPayload=h,e.createContractCallPayload=l,e.createSmartContractPayload=d,e.createPoisonPayload=f,e.createCoinbasePayload=p,e.serializePayload=function(t){const e=new o.BufferArray;switch(e.appendByte(t.payloadType),t.payloadType){case i.PayloadType.TokenTransfer:e.push(a.serializeCV(t.recipient)),e.push(t.amount.toArrayLike(r,"be",8)),e.push(s.serializeStacksMessage(t.memo));break;case i.PayloadType.ContractCall:e.push(s.serializeStacksMessage(t.contractAddress)),e.push(s.serializeStacksMessage(t.contractName)),e.push(s.serializeStacksMessage(t.functionName));const n=r.alloc(4);n.writeUInt32BE(t.functionArgs.length,0),e.push(n),t.functionArgs.forEach((t=>{e.push(a.serializeCV(t))}));break;case i.PayloadType.SmartContract:e.push(s.serializeStacksMessage(t.contractName)),e.push(s.serializeStacksMessage(t.codeBody));break;case i.PayloadType.PoisonMicroblock:break;case i.PayloadType.Coinbase:e.push(t.coinbaseBuffer)}return e.concatBuffer()},e.deserializePayload=function(t){switch(t.readUInt8Enum(i.PayloadType,(t=>{throw new Error(`Cannot recognize PayloadType: ${t}`)}))){case i.PayloadType.TokenTransfer:return h(a.deserializeCV(t),new u(t.readBuffer(8)),s.deserializeMemoString(t));case i.PayloadType.ContractCall:const e=s.deserializeAddress(t),n=s.deserializeLPString(t),r=s.deserializeLPString(t),o=[],c=t.readUInt32BE();for(let i=0;i<c;i++){const e=a.deserializeCV(t);o.push(e)}return l(e,n,r,o);case i.PayloadType.SmartContract:return d(s.deserializeLPString(t),s.deserializeLPString(t,4,1e5));case i.PayloadType.PoisonMicroblock:return f();case i.PayloadType.Coinbase:return p(t.readBuffer(i.COINBASE_BUFFER_LENGTH_BYTES))}}},41059:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.deserializePostCondition=e.serializePostCondition=e.createNonFungiblePostCondition=e.createFungiblePostCondition=e.createSTXPostCondition=void 0;const i=n(39954),o=n(40517),s=n(67327),a=n(31318),u=n(48041),c=n(8982);e.createSTXPostCondition=function(t,e,n){return"string"===typeof t&&(t=s.parsePrincipalString(t)),{type:i.StacksMessageType.PostCondition,conditionType:i.PostConditionType.STX,principal:t,conditionCode:e,amount:n}},e.createFungiblePostCondition=function(t,e,n,r){return"string"===typeof t&&(t=s.parsePrincipalString(t)),"string"===typeof r&&(r=s.parseAssetInfoString(r)),{type:i.StacksMessageType.PostCondition,conditionType:i.PostConditionType.Fungible,principal:t,conditionCode:e,amount:n,assetInfo:r}},e.createNonFungiblePostCondition=function(t,e,n,r){return"string"===typeof t&&(t=s.parsePrincipalString(t)),"string"===typeof n&&(n=s.parseAssetInfoString(n)),{type:i.StacksMessageType.PostCondition,conditionType:i.PostConditionType.NonFungible,principal:t,conditionCode:e,assetInfo:n,assetName:r}},e.serializePostCondition=function(t){const e=new o.BufferArray;return e.appendByte(t.conditionType),e.push(s.serializePrincipal(t.principal)),t.conditionType!==i.PostConditionType.Fungible&&t.conditionType!==i.PostConditionType.NonFungible||e.push(s.serializeAssetInfo(t.assetInfo)),t.conditionType===i.PostConditionType.NonFungible&&e.push(u.serializeCV(t.assetName)),e.appendByte(t.conditionCode),t.conditionType!==i.PostConditionType.STX&&t.conditionType!==i.PostConditionType.Fungible||e.push(t.amount.toArrayLike(r,"be",8)),e.concatBuffer()},e.deserializePostCondition=function(t){const e=t.readUInt8Enum(i.PostConditionType,(t=>{throw new c.DeserializationError(`Could not read ${t} as PostConditionType`)})),n=s.deserializePrincipal(t);let r,o,h;switch(e){case i.PostConditionType.STX:return r=t.readUInt8Enum(i.FungibleConditionCode,(t=>{throw new c.DeserializationError(`Could not read ${t} as FungibleConditionCode`)})),h=new a(t.readBuffer(8).toString("hex"),16),{type:i.StacksMessageType.PostCondition,conditionType:i.PostConditionType.STX,principal:n,conditionCode:r,amount:h};case i.PostConditionType.Fungible:return o=s.deserializeAssetInfo(t),r=t.readUInt8Enum(i.FungibleConditionCode,(t=>{throw new c.DeserializationError(`Could not read ${t} as FungibleConditionCode`)})),h=new a(t.readBuffer(8).toString("hex"),16),{type:i.StacksMessageType.PostCondition,conditionType:i.PostConditionType.Fungible,principal:n,conditionCode:r,amount:h,assetInfo:o};case i.PostConditionType.NonFungible:o=s.deserializeAssetInfo(t);const e=u.deserializeCV(t);return r=t.readUInt8Enum(i.NonFungibleConditionCode,(t=>{throw new c.DeserializationError(`Could not read ${t} as FungibleConditionCode`)})),{type:i.StacksMessageType.PostCondition,conditionType:i.PostConditionType.NonFungible,principal:n,conditionCode:r,assetInfo:o,assetName:e}}}},15532:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionSigner=void 0;const r=n(64418),i=n(40517),o=n(39954),s=n(8982);e.TransactionSigner=class{constructor(t){this.transaction=t,this.sigHash=t.signBegin(),this.originDone=!1,this.checkOversign=!0,this.checkOverlap=!0}static createSponsorSigner(t,e){if(t.auth.authType!=o.AuthType.Sponsored)throw new s.SigningError("Cannot add sponsor to non-sponsored transaction");const n=i.cloneDeep(t);n.setSponsor(e);const r=n.verifyOrigin(),a=new this(n);return a.originDone=!0,a.sigHash=r,a.checkOversign=!0,a.checkOverlap=!0,a}signOrigin(t){if(this.checkOverlap&&this.originDone)throw new s.SigningError("Cannot sign origin after sponsor key");if(void 0===this.transaction.auth)throw new s.SigningError('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new s.SigningError('"transaction.auth.spendingCondition" is undefined');if(!r.isSingleSig(this.transaction.auth.spendingCondition)){const t=this.transaction.auth.spendingCondition;if(this.checkOversign&&t.fields.length>=t.signaturesRequired)throw new Error("Origin would have too many signatures")}const e=this.transaction.signNextOrigin(this.sigHash,t);this.sigHash=e}appendOrigin(t){if(this.checkOverlap&&this.originDone)throw Error("Cannot append public key to origin after sponsor key");if(void 0===this.transaction.auth)throw new Error('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new Error('"transaction.auth.spendingCondition" is undefined');this.transaction.appendPubkey(t)}signSponsor(t){if(void 0===this.transaction.auth)throw new s.SigningError('"transaction.auth" is undefined');if(void 0===this.transaction.auth.sponsorSpendingCondition)throw new s.SigningError('"transaction.auth.spendingCondition" is undefined');const e=this.transaction.signNextSponsor(this.sigHash,t);this.sigHash=e,this.originDone=!0}getTxInComplete(){return i.cloneDeep(this.transaction)}resume(t){this.transaction=i.cloneDeep(t),this.sigHash=t.signBegin()}}},71905:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeTransaction=e.StacksTransaction=void 0;const i=n(39954),o=n(64418),s=n(40517),a=n(47541),u=n(67327),c=n(8982);class h{constructor(t,e,n,r,o,s,a){if(this.version=t,this.auth=e,this.payload=n,this.chainId=null!==a&&void 0!==a?a:i.DEFAULT_CHAIN_ID,this.postConditionMode=null!==o&&void 0!==o?o:i.PostConditionMode.Deny,this.postConditions=null!==r&&void 0!==r?r:u.createLPList([]),s)this.anchorMode=s;else switch(n.payloadType){case i.PayloadType.Coinbase:case i.PayloadType.PoisonMicroblock:this.anchorMode=i.AnchorMode.OnChainOnly;break;case i.PayloadType.ContractCall:case i.PayloadType.SmartContract:case i.PayloadType.TokenTransfer:this.anchorMode=i.AnchorMode.Any}}signBegin(){const t=s.cloneDeep(this);return t.auth=t.auth.intoInitialSighashAuth(),t.txid()}verifyBegin(){const t=s.cloneDeep(this);return t.auth=t.auth.intoInitialSighashAuth(),t.txid()}verifyOrigin(){return this.auth.verifyOrigin(this.verifyBegin())}signNextOrigin(t,e){if(void 0===this.auth.spendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,i.AuthType.Standard,e)}signNextSponsor(t,e){if(void 0===this.auth.sponsorSpendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.sponsorSpendingCondition,t,i.AuthType.Sponsored,e)}appendPubkey(t){const e=this.auth.spendingCondition;if(!e||o.isSingleSig(e))throw new Error("Can't append public key to a singlesig condition");e.fields.push(o.createTransactionAuthField(t))}signAndAppend(t,e,n,r){const{nextSig:i,nextSigHash:s}=o.nextSignature(e,n,t.fee,t.nonce,r);return o.isSingleSig(t)?t.signature=i:t.fields.push(o.createTransactionAuthField(i)),s}txid(){const t=this.serialize();return s.txidFromData(t)}setSponsor(t){if(this.auth.authType!=i.AuthType.Sponsored)throw new c.SigningError("Cannot sponsor sign a non-sponsored transaction");this.auth.setSponsor(t)}setFee(t){this.auth.setFee(t)}setNonce(t){this.auth.setNonce(t)}setSponsorNonce(t){this.auth.setSponsorNonce(t)}serialize(){if(void 0===this.version)throw new c.SerializationError('"version" is undefined');if(void 0===this.chainId)throw new c.SerializationError('"chainId" is undefined');if(void 0===this.auth)throw new c.SerializationError('"auth" is undefined');if(void 0===this.anchorMode)throw new c.SerializationError('"anchorMode" is undefined');if(void 0===this.payload)throw new c.SerializationError('"payload" is undefined');const t=new s.BufferArray;t.appendByte(this.version);const e=r.alloc(4);return e.writeUInt32BE(this.chainId,0),t.push(e),t.push(this.auth.serialize()),t.appendByte(this.anchorMode),t.appendByte(this.postConditionMode),t.push(u.serializeLPList(this.postConditions)),t.push(a.serializePayload(this.payload)),t.concatBuffer()}}e.StacksTransaction=h,e.deserializeTransaction=function(t){const e=t.readUInt8Enum(i.TransactionVersion,(t=>{throw new Error(`Could not parse ${t} as TransactionVersion`)})),n=t.readUInt32BE(),r=o.Authorization.deserialize(t),s=t.readUInt8Enum(i.AnchorMode,(t=>{throw new Error(`Could not parse ${t} as AnchorMode`)})),c=t.readUInt8Enum(i.PostConditionMode,(t=>{throw new Error(`Could not parse ${t} as PostConditionMode`)})),l=u.deserializeLPList(t,i.StacksMessageType.PostCondition),d=a.deserializePayload(t);return new h(e,r,d,l,c,s,n)}},67327:function(t,e,n){"use strict";var r=n(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeLPList=e.serializeLPList=e.createLPList=e.deserializeAssetInfo=e.serializeAssetInfo=e.createAssetInfo=e.parseAssetInfoString=e.deserializeMemoString=e.serializeMemoString=e.createMemoString=e.codeBodyString=e.deserializeLPString=e.serializeLPString=e.createLPString=e.deserializePrincipal=e.serializePrincipal=e.createContractPrincipal=e.createStandardPrincipal=e.parsePrincipalString=e.deserializeAddress=e.serializeAddress=e.addressToString=e.addressFromPublicKeys=e.addressFromHashMode=e.addressHashModeToVersion=e.addressFromVersionHash=e.createEmptyAddress=e.createAddress=e.deserializeStacksMessage=e.serializeStacksMessage=void 0;const i=n(39954),o=n(61325),s=n(40517),a=n(27701),u=n(41059),c=n(47541),h=n(8982),l=n(64418);function d(t){switch(t.type){case i.StacksMessageType.Address:return g(t);case i.StacksMessageType.Principal:return S(t);case i.StacksMessageType.LengthPrefixedString:return T(t);case i.StacksMessageType.MemoString:return A(t);case i.StacksMessageType.AssetInfo:return B(t);case i.StacksMessageType.PostCondition:return u.serializePostCondition(t);case i.StacksMessageType.PublicKey:return o.serializePublicKey(t);case i.StacksMessageType.LengthPrefixedList:return _(t);case i.StacksMessageType.Payload:return c.serializePayload(t);case i.StacksMessageType.TransactionAuthField:return l.serializeTransactionAuthField(t);case i.StacksMessageType.MessageSignature:return l.serializeMessageSignature(t)}}function f(t){const e=a.c32addressDecode(t);return{type:i.StacksMessageType.Address,version:e[0],hash160:e[1]}}function p(t,e){return{type:i.StacksMessageType.Address,version:t,hash160:e}}function y(t,e){switch(t){case i.AddressHashMode.SerializeP2PKH:switch(e){case i.TransactionVersion.Mainnet:return i.AddressVersion.MainnetSingleSig;case i.TransactionVersion.Testnet:return i.AddressVersion.TestnetSingleSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(e)} for hashMode ${t}`)}case i.AddressHashMode.SerializeP2SH:case i.AddressHashMode.SerializeP2WPKH:case i.AddressHashMode.SerializeP2WSH:switch(e){case i.TransactionVersion.Mainnet:return i.AddressVersion.MainnetMultiSig;case i.TransactionVersion.Testnet:return i.AddressVersion.TestnetMultiSig;default:throw new Error(`Unexpected txVersion ${JSON.stringify(e)} for hashMode ${t}`)}default:throw new Error(`Unexpected hashMode ${JSON.stringify(t)}`)}}function g(t){const e=new s.BufferArray;return e.appendHexString(s.intToHexString(t.version,1)),e.appendHexString(t.hash160),e.concatBuffer()}function m(t){const e=s.hexStringToInt(t.readBuffer(1).toString("hex")),n=t.readBuffer(20).toString("hex");return{type:i.StacksMessageType.Address,version:e,hash160:n}}function w(t){const e=f(t);return{type:i.StacksMessageType.Principal,prefix:i.PostConditionPrincipalID.Standard,address:e}}function v(t,e){const n=f(t),r=C(e);return{type:i.StacksMessageType.Principal,prefix:i.PostConditionPrincipalID.Contract,address:n,contractName:r}}function S(t){const e=new s.BufferArray;return e.push(r.from([t.prefix])),e.push(g(t.address)),t.prefix===i.PostConditionPrincipalID.Contract&&e.push(T(t.contractName)),e.concatBuffer()}function b(t){const e=t.readUInt8Enum(i.PostConditionPrincipalID,(t=>{throw new h.DeserializationError("Unexpected Principal payload type: ${n}")})),n=m(t);if(e===i.PostConditionPrincipalID.Standard)return{type:i.StacksMessageType.Principal,prefix:e,address:n};const r=M(t);return{type:i.StacksMessageType.Principal,prefix:e,address:n,contractName:r}}function C(t,e,n){const r=e||1,o=n||i.MAX_STRING_LENGTH_BYTES;if(s.exceedsMaxLengthBytes(t,o))throw new Error(`String length exceeds maximum bytes ${o.toString()}`);return{type:i.StacksMessageType.LengthPrefixedString,content:t,lengthPrefixBytes:r,maxLengthBytes:o}}function T(t){const e=new s.BufferArray,n=r.from(t.content),i=n.byteLength;return e.appendHexString(s.intToHexString(i,t.lengthPrefixBytes)),e.push(n),e.concatBuffer()}function M(t,e,n){e=e||1;const r=s.hexStringToInt(t.readBuffer(e).toString("hex"));return C(t.readBuffer(r).toString(),e,null!==n&&void 0!==n?n:128)}function A(t){const e=new s.BufferArray,n=r.from(t.content),o=s.rightPadHexToLength(n.toString("hex"),2*i.MEMO_MAX_LENGTH_BYTES);return e.push(r.from(o,"hex")),e.concatBuffer()}function P(t){const e=t.readBuffer(i.MEMO_MAX_LENGTH_BYTES).toString();return{type:i.StacksMessageType.MemoString,content:e}}function E(t,e,n){return{type:i.StacksMessageType.AssetInfo,address:f(t),contractName:C(e),assetName:C(n)}}function B(t){const e=new s.BufferArray;return e.push(g(t.address)),e.push(T(t.contractName)),e.push(T(t.assetName)),e.concatBuffer()}function k(t){return{type:i.StacksMessageType.AssetInfo,address:m(t),contractName:M(t),assetName:M(t)}}function I(t,e){return{type:i.StacksMessageType.LengthPrefixedList,lengthPrefixBytes:e||4,values:t}}function _(t){const e=t.values,n=new s.BufferArray;n.appendHexString(s.intToHexString(e.length,t.lengthPrefixBytes));for(let r=0;r<e.length;r++)n.push(d(e[r]));return n.concatBuffer()}function x(t,e,n){const r=s.hexStringToInt(t.readBuffer(n||4).toString("hex")),a=[];for(let s=0;s<r;s++)switch(e){case i.StacksMessageType.Address:a.push(m(t));break;case i.StacksMessageType.LengthPrefixedString:a.push(M(t));break;case i.StacksMessageType.MemoString:a.push(P(t));break;case i.StacksMessageType.AssetInfo:a.push(k(t));break;case i.StacksMessageType.PostCondition:a.push(u.deserializePostCondition(t));break;case i.StacksMessageType.PublicKey:a.push(o.deserializePublicKey(t));break;case i.StacksMessageType.TransactionAuthField:a.push(l.deserializeTransactionAuthField(t))}return I(a,n)}e.serializeStacksMessage=d,e.deserializeStacksMessage=function(t,e,n){switch(e){case i.StacksMessageType.Address:return m(t);case i.StacksMessageType.Principal:return b(t);case i.StacksMessageType.LengthPrefixedString:return M(t);case i.StacksMessageType.MemoString:return P(t);case i.StacksMessageType.AssetInfo:return k(t);case i.StacksMessageType.PostCondition:return u.deserializePostCondition(t);case i.StacksMessageType.PublicKey:return o.deserializePublicKey(t);case i.StacksMessageType.Payload:return c.deserializePayload(t);case i.StacksMessageType.LengthPrefixedList:if(!n)throw new h.DeserializationError("No List Type specified");return x(t,n);case i.StacksMessageType.MessageSignature:return l.deserializeMessageSignature(t);default:throw new Error("Could not recognize StacksMessageType")}},e.createAddress=f,e.createEmptyAddress=function(){return{type:i.StacksMessageType.Address,version:i.AddressVersion.MainnetSingleSig,hash160:"0".repeat(40)}},e.addressFromVersionHash=p,e.addressHashModeToVersion=y,e.addressFromHashMode=function(t,e,n){return p(y(t,e),n)},e.addressFromPublicKeys=function(t,e,n,r){if(0===r.length)throw Error("Invalid number of public keys");if((e===i.AddressHashMode.SerializeP2PKH||e===i.AddressHashMode.SerializeP2WPKH)&&(1!==r.length||1!==n))throw Error("Invalid number of public keys or signatures");if(e===i.AddressHashMode.SerializeP2WPKH||e===i.AddressHashMode.SerializeP2WSH)for(let i=0;i<r.length;i++)if(!o.isCompressed(r[i]))throw Error("Public keys must be compressed for segwit");switch(e){case i.AddressHashMode.SerializeP2PKH:return p(t,s.hashP2PKH(r[0].data));case i.AddressHashMode.SerializeP2SH:return p(t,s.hashP2SH(n,r.map(o.serializePublicKey)));default:throw Error(`Not yet implemented: address construction using public keys for hash mode: ${e}`)}},e.addressToString=function(t){return a.c32address(t.version,t.hash160).toString()},e.serializeAddress=g,e.deserializeAddress=m,e.parsePrincipalString=function(t){if(t.includes(".")){const[e,n]=t.split(".");return v(e,n)}return w(t)},e.createStandardPrincipal=w,e.createContractPrincipal=v,e.serializePrincipal=S,e.deserializePrincipal=b,e.createLPString=C,e.serializeLPString=T,e.deserializeLPString=M,e.codeBodyString=function(t){return C(t,4,1e5)},e.createMemoString=function(t){if(t&&s.exceedsMaxLengthBytes(t,i.MEMO_MAX_LENGTH_BYTES))throw new Error(`Memo exceeds maximum length of ${i.MEMO_MAX_LENGTH_BYTES.toString()} bytes`);return{type:i.StacksMessageType.MemoString,content:t}},e.serializeMemoString=A,e.deserializeMemoString=P,e.parseAssetInfoString=function(t){const[e,n,r]=t.split(/\.|::/);return E(e,n,r)},e.createAssetInfo=E,e.serializeAssetInfo=B,e.deserializeAssetInfo=k,e.createLPList=I,e.serializeLPList=_,e.deserializeLPList=x},40517:function(t,e,n){"use strict";var r=n(48764).Buffer,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.validateStacksAddress=e.parseReadOnlyResponse=e.cvToHex=e.fetchPrivate=e.isClarityName=e.hashP2SH=e.hashP2PKH=e.hash160=e.txidFromData=e.sha512_256=e.omit=e.cloneDeep=e.exceedsMaxLengthBytes=e.hexStringToInt=e.intToHexString=e.rightPadHexToLength=e.leftPadHexToLength=e.leftPadHex=e.BufferArray=e.randomBytes=void 0;const o=n(89072),s=n(48041),a=n(44574),u=n(61798);e.randomBytes=u;const c=n(48041),h=n(54098),l=n(27701),d=n(50361);class f{constructor(){this._value=[]}get value(){return this._value}appendHexString(t){this.value.push(r.from(t,"hex"))}push(t){return this._value.push(t)}appendByte(t){if(!Number.isInteger(t)||t<0||t>255)throw new Error(`Value ${t} is not a valid byte`);this.value.push(r.from([t]))}concatBuffer(){return r.concat(this.value)}}function p(t){return d(t)}e.BufferArray=f,e.leftPadHex=t=>t.length%2==0?t:`0${t}`,e.leftPadHexToLength=(t,e)=>t.padStart(e,"0"),e.rightPadHexToLength=(t,e)=>t.padEnd(e,"0"),e.intToHexString=(t,e=8)=>t.toString(16).padStart(2*e,"0"),e.hexStringToInt=t=>parseInt(t,16),e.exceedsMaxLengthBytes=(t,e)=>!!t&&r.from(t).length>e,e.cloneDeep=p,e.omit=function(t,e){const n=p(t);return delete n[e],n};class y extends o.sha512{constructor(){super(),Object.assign(this,{_ah:573645204,_al:4230739756,_bh:2673172387,_bl:3360449730,_ch:596883563,_cl:1867755857,_dh:2520282905,_dl:1497426621,_eh:2519219938,_el:2827943907,_fh:3193839141,_fl:1401305490,_gh:721525244,_gl:746961066,_hh:246885852,_hl:2177182882})}digest(t){const e=super.digest().slice(0,32);return t?e.toString(t):e}}e.sha512_256=y,e.txidFromData=t=>(new y).update(t).digest("hex"),e.hash160=t=>{const e=(new o.sha256).update(t).digest();return r.from((new a.default).update(e).digest())},e.hashP2PKH=t=>e.hash160(t).toString("hex"),e.hashP2SH=(t,n)=>{if(t>15||n.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");const r=new f;r.appendByte(80+t),n.forEach((t=>{r.appendByte(t.length),r.push(t)})),r.appendByte(80+n.length),r.appendByte(174);const i=r.concatBuffer();return e.hash160(i).toString("hex")},e.isClarityName=function(t){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(t)&&t.length<128},e.fetchPrivate=function(t,e){return i(this,void 0,void 0,(function*(){const n=Object.assign({referrer:"no-referrer",referrerPolicy:"no-referrer"},e);return yield h.default(t,n)}))},e.cvToHex=function(t){return`0x${s.serializeCV(t).toString("hex")}`},e.parseReadOnlyResponse=({result:t})=>{const e=t.slice(2),n=r.from(e,"hex");return c.deserializeCV(n)},e.validateStacksAddress=t=>{try{return l.c32addressDecode(t),!0}catch(e){return!1}}},31318:function(t,e,n){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:n(89687).Buffer}catch(A){}function a(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(t,e,n){var r=a(t,n);return n-1>=e&&(r|=a(t,n-1)<<4),r}function c(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"===typeof t)return this._initNumber(t,e,n);if("object"===typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=u(t,e,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(t.length-e)%2===0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,h=n;h<a;h+=r)u=c(t,h,h+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[f])+l)/67108864|0,l=67108863&s}n.words[c]=0|l,u=0|h}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],f=d[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var y=p.modn(f).toString(t);n=(p=p.idivn(f)).isZero()?y+n:h[c-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%e!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0===(8191&e)&&(n+=13,e>>>=13),0===(127&e)&&(n+=7,e>>>=7),0===(15&e)&&(n+=4,e>>>=4),0===(3&e)&&(n+=2,e>>>=2),0===(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"===typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,s=t.words,a=e.words,u=n.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,f=0|s[1],p=8191&f,y=f>>>13,g=0|s[2],m=8191&g,w=g>>>13,v=0|s[3],S=8191&v,b=v>>>13,C=0|s[4],T=8191&C,M=C>>>13,A=0|s[5],P=8191&A,E=A>>>13,B=0|s[6],k=8191&B,I=B>>>13,_=0|s[7],x=8191&_,O=_>>>13,U=0|s[8],L=8191&U,z=U>>>13,N=0|s[9],F=8191&N,V=N>>>13,$=0|a[0],R=8191&$,K=$>>>13,H=0|a[1],j=8191&H,D=H>>>13,G=0|a[2],Y=8191&G,X=G>>>13,q=0|a[3],Z=8191&q,W=q>>>13,J=0|a[4],Q=8191&J,tt=J>>>13,et=0|a[5],nt=8191&et,rt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,dt=ht>>>13,ft=0|a[9],pt=8191&ft,yt=ft>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(l,R))|0)+((8191&(i=(i=Math.imul(l,K))+Math.imul(d,R)|0))<<13)|0;c=((o=Math.imul(d,K))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,R),i=(i=Math.imul(p,K))+Math.imul(y,R)|0,o=Math.imul(y,K);var mt=(c+(r=r+Math.imul(l,j)|0)|0)+((8191&(i=(i=i+Math.imul(l,D)|0)+Math.imul(d,j)|0))<<13)|0;c=((o=o+Math.imul(d,D)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,R),i=(i=Math.imul(m,K))+Math.imul(w,R)|0,o=Math.imul(w,K),r=r+Math.imul(p,j)|0,i=(i=i+Math.imul(p,D)|0)+Math.imul(y,j)|0,o=o+Math.imul(y,D)|0;var wt=(c+(r=r+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,X)|0)+Math.imul(d,Y)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(S,R),i=(i=Math.imul(S,K))+Math.imul(b,R)|0,o=Math.imul(b,K),r=r+Math.imul(m,j)|0,i=(i=i+Math.imul(m,D)|0)+Math.imul(w,j)|0,o=o+Math.imul(w,D)|0,r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,X)|0;var vt=(c+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(d,Z)|0))<<13)|0;c=((o=o+Math.imul(d,W)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(T,R),i=(i=Math.imul(T,K))+Math.imul(M,R)|0,o=Math.imul(M,K),r=r+Math.imul(S,j)|0,i=(i=i+Math.imul(S,D)|0)+Math.imul(b,j)|0,o=o+Math.imul(b,D)|0,r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,W)|0;var St=(c+(r=r+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(P,R),i=(i=Math.imul(P,K))+Math.imul(E,R)|0,o=Math.imul(E,K),r=r+Math.imul(T,j)|0,i=(i=i+Math.imul(T,D)|0)+Math.imul(M,j)|0,o=o+Math.imul(M,D)|0,r=r+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,X)|0)+Math.imul(b,Y)|0,o=o+Math.imul(b,X)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,W)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,W)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0;var bt=(c+(r=r+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,rt)|0)+Math.imul(d,nt)|0))<<13)|0;c=((o=o+Math.imul(d,rt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(k,R),i=(i=Math.imul(k,K))+Math.imul(I,R)|0,o=Math.imul(I,K),r=r+Math.imul(P,j)|0,i=(i=i+Math.imul(P,D)|0)+Math.imul(E,j)|0,o=o+Math.imul(E,D)|0,r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(M,Y)|0,o=o+Math.imul(M,X)|0,r=r+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,W)|0)+Math.imul(b,Z)|0,o=o+Math.imul(b,W)|0,r=r+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0;var Ct=(c+(r=r+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,st)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(x,R),i=(i=Math.imul(x,K))+Math.imul(O,R)|0,o=Math.imul(O,K),r=r+Math.imul(k,j)|0,i=(i=i+Math.imul(k,D)|0)+Math.imul(I,j)|0,o=o+Math.imul(I,D)|0,r=r+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,X)|0,r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,W)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0;var Tt=(c+(r=r+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(d,ut)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(L,R),i=(i=Math.imul(L,K))+Math.imul(z,R)|0,o=Math.imul(z,K),r=r+Math.imul(x,j)|0,i=(i=i+Math.imul(x,D)|0)+Math.imul(O,j)|0,o=o+Math.imul(O,D)|0,r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,r=r+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,W)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,W)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(S,nt)|0,i=(i=i+Math.imul(S,rt)|0)+Math.imul(b,nt)|0,o=o+Math.imul(b,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0;var Mt=(c+(r=r+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(F,R),i=(i=Math.imul(F,K))+Math.imul(V,R)|0,o=Math.imul(V,K),r=r+Math.imul(L,j)|0,i=(i=i+Math.imul(L,D)|0)+Math.imul(z,j)|0,o=o+Math.imul(z,D)|0,r=r+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,X)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,X)|0,r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,W)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,W)|0,r=r+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,rt)|0,r=r+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,r=r+Math.imul(m,ut)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,r=r+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,dt)|0;var At=(c+(r=r+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,yt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,yt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(F,j),i=(i=Math.imul(F,D))+Math.imul(V,j)|0,o=Math.imul(V,D),r=r+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(z,Y)|0,o=o+Math.imul(z,X)|0,r=r+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,W)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,W)|0,r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,r=r+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,ct)|0)+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,r=r+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,dt)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,dt)|0;var Pt=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,yt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,yt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(F,Y),i=(i=Math.imul(F,X))+Math.imul(V,Y)|0,o=Math.imul(V,X),r=r+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(z,Z)|0,o=o+Math.imul(z,W)|0,r=r+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(b,lt)|0,o=o+Math.imul(b,dt)|0;var Et=(c+(r=r+Math.imul(m,pt)|0)|0)+((8191&(i=(i=i+Math.imul(m,yt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,yt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(F,Z),i=(i=Math.imul(F,W))+Math.imul(V,Z)|0,o=Math.imul(V,W),r=r+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(z,Q)|0,o=o+Math.imul(z,tt)|0,r=r+Math.imul(x,nt)|0,i=(i=i+Math.imul(x,rt)|0)+Math.imul(O,nt)|0,o=o+Math.imul(O,rt)|0,r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,st)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,st)|0,r=r+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,dt)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,dt)|0;var Bt=(c+(r=r+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,yt)|0)+Math.imul(b,pt)|0))<<13)|0;c=((o=o+Math.imul(b,yt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(F,Q),i=(i=Math.imul(F,tt))+Math.imul(V,Q)|0,o=Math.imul(V,tt),r=r+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,rt)|0)+Math.imul(z,nt)|0,o=o+Math.imul(z,rt)|0,r=r+Math.imul(x,ot)|0,i=(i=i+Math.imul(x,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,dt)|0)+Math.imul(E,lt)|0,o=o+Math.imul(E,dt)|0;var kt=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,yt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,yt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(F,nt),i=(i=Math.imul(F,rt))+Math.imul(V,nt)|0,o=Math.imul(V,rt),r=r+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(z,ot)|0,o=o+Math.imul(z,st)|0,r=r+Math.imul(x,ut)|0,i=(i=i+Math.imul(x,ct)|0)+Math.imul(O,ut)|0,o=o+Math.imul(O,ct)|0,r=r+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,dt)|0)+Math.imul(I,lt)|0,o=o+Math.imul(I,dt)|0;var It=(c+(r=r+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,yt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,yt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(F,ot),i=(i=Math.imul(F,st))+Math.imul(V,ot)|0,o=Math.imul(V,st),r=r+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,ct)|0)+Math.imul(z,ut)|0,o=o+Math.imul(z,ct)|0,r=r+Math.imul(x,lt)|0,i=(i=i+Math.imul(x,dt)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,dt)|0;var _t=(c+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,yt)|0)+Math.imul(I,pt)|0))<<13)|0;c=((o=o+Math.imul(I,yt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(F,ut),i=(i=Math.imul(F,ct))+Math.imul(V,ut)|0,o=Math.imul(V,ct),r=r+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,dt)|0)+Math.imul(z,lt)|0,o=o+Math.imul(z,dt)|0;var xt=(c+(r=r+Math.imul(x,pt)|0)|0)+((8191&(i=(i=i+Math.imul(x,yt)|0)+Math.imul(O,pt)|0))<<13)|0;c=((o=o+Math.imul(O,yt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(F,lt),i=(i=Math.imul(F,dt))+Math.imul(V,lt)|0,o=Math.imul(V,dt);var Ot=(c+(r=r+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,yt)|0)+Math.imul(z,pt)|0))<<13)|0;c=((o=o+Math.imul(z,yt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863;var Ut=(c+(r=Math.imul(F,pt))|0)+((8191&(i=(i=Math.imul(F,yt))+Math.imul(V,pt)|0))<<13)|0;return c=((o=Math.imul(V,yt))+(i>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,u[0]=gt,u[1]=mt,u[2]=wt,u[3]=vt,u[4]=St,u[5]=bt,u[6]=Ct,u[7]=Tt,u[8]=Mt,u[9]=At,u[10]=Pt,u[11]=Et,u[12]=Bt,u[13]=kt,u[14]=It,u[15]=_t,u[16]=xt,u[17]=Ot,u[18]=Ut,0!==c&&(u[19]=c,n.length++),n};function y(t,e,n){return(new g).mulp(t,e,n)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?f(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):y(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},g.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},g.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},g.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,d=c,f=0;f<s;f++){var p=n[h+f],y=r[h+f],g=n[h+f+s],m=r[h+f+s],w=l*g-d*m;m=l*m+d*g,g=w,n[h+f]=p+g,r[h+f]=y+m,n[h+f+s]=p-g,r[h+f+s]=y-m,f!==a&&(w=u*l-c*d,d=u*d+c*l,l=w)}},g.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},g.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},g.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),d=n.words;d.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,h,l,r,i);for(var f=0;f<r;f++){var p=a[f]*h[f]-u[f]*l[f];u[f]=a[f]*l[f]+u[f]*h[f],a[f]=p}return this.conjugate(a,u,r),this.transform(a,u,d,o,r,i),this.conjugate(d,o,r),this.normalize13b(d,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"===typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"===typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"===typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"===typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,u);0===h.negative&&(r=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var d=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(i,d,l);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);a&&(a.words[l]=d)}return a&&a.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0===(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,y=1;0===(n.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(a),s.isub(u)):(n.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,d=1;0===(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"===typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new T(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},i(v,w),v.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(S,w),i(b,w),i(C,w),C.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new S;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new C}return m[t]=e,e},T.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},T.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},T.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},T.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var y=f,g=0;0!==y.cmp(a);g++)y=y.redSqr();r(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));d=d.redMul(m),l=m.redSqr(),f=f.redMul(l),p=g}return d},T.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},T.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],h=u-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===r&&0===h)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},i(M,T),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=n.nmd(t),this)},13977:function(t,e,n){"use strict";n.d(e,{UQ:function(){return K}});var r,i,o,s,a=n(29338),u=n(35666),c=n.n(u),h=n(91621),l=n(39148),d=n(56080),f=n(47369);(i=r||(r={})).ContractCall="contract_call",i.ContractDeploy="smart_contract",i.STXTransfer="token_transfer",(s=o||(o={})).BUFFER="buffer",s.UINT="uint",s.INT="int",s.PRINCIPAL="principal",s.BOOL="bool";var p=n(69088),y=n(96533),g=n(31357),m=n(98681),w=n(14187),v=n(7514),S=n(2589),b=n(45621),C=n(30365);class T{constructor(t,e,n,r,i,o,s){if(this.version=t,this.auth=e,this.payload="amount"in n?Object.assign(Object.assign({},n),{amount:(0,p.HN)(n.amount,!1)}):n,this.chainId=null!==s&&void 0!==s?s:y.rC,this.postConditionMode=null!==i&&void 0!==i?i:y.hW.Deny,this.postConditions=null!==r&&void 0!==r?r:(0,v.lZ)([]),o)this.anchorMode=o;else switch(n.payloadType){case y.MX.Coinbase:case y.MX.PoisonMicroblock:this.anchorMode=y.u0.OnChainOnly;break;case y.MX.ContractCall:case y.MX.SmartContract:case y.MX.TokenTransfer:this.anchorMode=y.u0.Any}}signBegin(){const t=(0,m.Xh)(this);return t.auth=t.auth.intoInitialSighashAuth(),t.txid()}verifyBegin(){const t=(0,m.Xh)(this);return t.auth=t.auth.intoInitialSighashAuth(),t.txid()}createTxWithSignature(t){const e="string"===typeof t?t:t.toString("hex"),n=(0,m.Xh)(this);if(!n.auth.spendingCondition)throw new Error("Cannot set signature on transaction without spending condition");return n.auth.spendingCondition.signature=(0,g.V1)(e),n}verifyOrigin(){return this.auth.verifyOrigin(this.verifyBegin())}signNextOrigin(t,e){if(void 0===this.auth.spendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,y.Gr.Standard,e)}signNextSponsor(t,e){if(void 0===this.auth.sponsorSpendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.sponsorSpendingCondition,t,y.Gr.Sponsored,e)}appendPubkey(t){const e=this.auth.spendingCondition;if(!e||(0,g.GP)(e))throw new Error("Can't append public key to a singlesig condition");{const n=(0,S.Dn)(t);e.fields.push((0,g.JT)(n?y.gW.Compressed:y.gW.Uncompressed,t))}}signAndAppend(t,e,n,r){const{nextSig:i,nextSigHash:o}=(0,g.a6)(e,n,t.fee,t.nonce,r);if((0,g.GP)(t))t.signature=i;else{const e=r.data.toString("hex").endsWith("01");t.fields.push((0,g.JT)(e?y.gW.Compressed:y.gW.Uncompressed,i))}return o}txid(){const t=this.serialize();return(0,m.G8)(t)}setSponsor(t){if(this.auth.authType!=y.Gr.Sponsored)throw new C.g9("Cannot sponsor sign a non-sponsored transaction");this.auth.setSponsor(t)}setFee(t){this.auth.setFee(t)}setNonce(t){this.auth.setNonce(t)}setSponsorNonce(t){this.auth.setSponsorNonce(t)}serialize(){if(void 0===this.version)throw new C.TH('"version" is undefined');if(void 0===this.chainId)throw new C.TH('"chainId" is undefined');if(void 0===this.auth)throw new C.TH('"auth" is undefined');if(void 0===this.anchorMode)throw new C.TH('"anchorMode" is undefined');if(void 0===this.payload)throw new C.TH('"payload" is undefined');const t=new m.RE;t.appendByte(this.version);const e=p.lW.alloc(4);return e.writeUInt32BE(this.chainId,0),t.push(e),t.push(this.auth.serialize()),t.appendByte(this.anchorMode),t.appendByte(this.postConditionMode),t.push((0,v.r3)(this.postConditions)),t.push((0,w.al)(this.payload)),t.concatBuffer()}}function M(t){let e;e="string"===typeof t?"0x"===t.slice(0,2).toLowerCase()?new b.h(p.lW.from(t.slice(2),"hex")):new b.h(p.lW.from(t,"hex")):p.lW.isBuffer(t)?new b.h(t):t;const n=e.readUInt8Enum(y.Kn,(t=>{throw new Error(`Could not parse ${t} as TransactionVersion`)})),r=e.readUInt32BE(),i=g._n.deserialize(e),o=e.readUInt8Enum(y.u0,(t=>{throw new Error(`Could not parse ${t} as AnchorMode`)})),s=e.readUInt8Enum(y.hW,(t=>{throw new Error(`Could not parse ${t} as PostConditionMode`)})),a=(0,v.nt)(e,y.L8.PostCondition),u=(0,w.LV)(e);return new T(n,i,u,a,s,o,r)}var A=n(37903),P=n(95298),E=n(52721),B=n(73930);class k{constructor(t={url:"https://stacks-node-api.mainnet.stacks.co"}){this.version=E.Kn.Mainnet,this.chainId=E.oK.Mainnet,this.bnsLookupUrl="https://stacks-node-api.mainnet.stacks.co",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===E.Kn.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getAccountApiUrl=t=>`${this.coreApiUrl}${this.accountEndpoint}/${t}?proof=0`,this.getAbiApiUrl=(t,e)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${t}/${e}`,this.getReadOnlyFunctionCallApiUrl=(t,e,n)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${t}/${e}/${encodeURIComponent(n)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(t,e)=>{let n=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${t}`;return e&&(n=`${n}?limit=${e.limit}&offset=${e.offset}`),n},this.getRewardsTotalUrl=t=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${t}/total`,this.getRewardHoldersUrl=(t,e)=>{let n=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${t}`;return e&&(n=`${n}?limit=${e.limit}&offset=${e.offset}`),n},this.getStackerInfoUrl=(t,e)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${t}/${e}/get-stacker-info`,this._coreApiUrl=t.url}get coreApiUrl(){return this._coreApiUrl}set coreApiUrl(t){throw new Error("Cannot modify property `coreApiUrl` after object initialization")}getNameInfo(t){const e=`${this.bnsLookupUrl}/v1/names/${t}`;return(0,B.I)(e).then((t=>{if(404===t.status)throw new Error("Name not found");if(200!==t.status)throw new Error(`Bad response status: ${t.status}`);return t.json()})).then((t=>t.address?Object.assign({},t,{address:t.address}):t))}}class I extends k{constructor(t={url:"https://stacks-node-api.testnet.stacks.co"}){super(t),this.version=E.Kn.Testnet,this.chainId=E.oK.Testnet}}var _=n(99636).Buffer,x=["functionArgs","appDetails","userSession"],O=function(t){var e=t;if(!e){var n=new h.X(["store_write"],document.location.href);e=new l.V({appConfig:n})}return e},U=function(t){var e=O(t).loadUserData().appPrivateKey;return{privateKey:e,publicKey:d.SECP256K1Client.derivePublicKey(e)}};function L(t){var e,n,r=t.stxAddress,i=t.userSession,o=t.network;if(r)return r;if(i&&o){var s=null==i||null==(e=i.loadUserData().profile)?void 0:e.stxAddress,a=((n={})[y.oK.Mainnet]="mainnet",n[y.oK.Testnet]="testnet",n);return null==s?void 0:s[a[o.chainId]]}}function z(t){var e=t.network||new I,n=O(t.userSession),r=(0,a.gY)({},t,{network:e,userSession:n});return(0,a.gY)({stxAddress:L(r)},r)}var N=function(){var t=(0,a.x)(c().mark((function t(e,n){var r,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.postConditions)&&"string"!==typeof r[0]&&(r=r.map((function(t){return(0,A.yY)(t).toString("hex")}))),i=new d.TokenSigner("ES256k",n),t.abrupt("return",i.signAsync((0,a.gY)({},e,{postConditions:r})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),F=function(){var t=(0,a.x)(c().mark((function t(e){var n,r,i,o,s,u,h;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.token,r=e.options,i=(0,f.Y)()){t.next=4;break}throw new Error("Hiro Wallet not installed.");case 4:return t.prev=4,t.next=7,i.transactionRequest(n);case 7:if(o=t.sent,s=o.txRaw,u=_.from(s.replace(/^0x/,""),"hex"),h=M(new b.h(u)),!("sponsored"in r)||!r.sponsored){t.next=14;break}return null==r.onFinish||r.onFinish((0,a.gY)({},o,{stacksTransaction:h})),t.abrupt("return");case 14:null==r.onFinish||r.onFinish((0,a.gY)({},o,{stacksTransaction:h})),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(4),console.error("[Connect] Error during transaction request",t.t0),null==r.onCancel||r.onCancel();case 21:case"end":return t.stop()}}),t,null,[[4,17]])})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=(0,a.x)(c().mark((function t(e){var n,i,o,s,u,h,l,d,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.functionArgs,i=e.appDetails,o=e.userSession,s=(0,a.gK)(e,x),u=U(o),h=u.privateKey,l=u.publicKey,d=n.map((function(t){return"string"===typeof t?t:(0,P.a)(t).toString("hex")})),f=(0,a.gY)({},s,{functionArgs:d,txType:r.ContractCall,publicKey:l}),i&&(f.appDetails=i),t.abrupt("return",N(f,h));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function $(t,e){return R.apply(this,arguments)}function R(){return(R=(0,a.x)(c().mark((function t(e,n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n((0,a.gY)({},z(e),e));case 2:return r=t.sent,t.abrupt("return",F({token:r,options:e}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t){return $(t,V)}},99636:function(t,e,n){"use strict";const r=n(79742),i=n(80645),o="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,n)}function c(t,e,n){if("string"===typeof t)return function(t,e){"string"===typeof e&&""!==e||(e="utf8");if(!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|y(t,e);let r=a(n);const i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!==typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);const i=function(t){if(u.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!==typeof t.length||Z(t.length)?a(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return h(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(i)return r?-1:G(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return B(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){let o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===u)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){let n=!0;for(let r=0;r<u;r++)if(c(t,o+r)!==c(e,r)){n=!1;break}if(n)return o}return-1}function S(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(Z(r))return s;t[n+s]=r}return s}function b(t,e,n,r){return X(G(e,t.length-n),t,n,r)}function C(t,e,n,r){return X(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return X(Y(e),t,n,r)}function M(t,e,n,r){return X(function(t,e){let n,r,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128===(192&n)&&(u=(31&e)<<6|63&n,u>127&&(o=u));break;case 3:n=t[i+1],r=t[i+2],128===(192&n)&&128===(192&r)&&(u=(15&e)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){const e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=E));return n}(r)}e.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return h(t),t<=0?a(t):void 0!==e?"string"===typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},u.allocUnsafe=function(t){return l(t)},u.allocUnsafeSlow=function(t){return l(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(q(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=u.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(q(e,Uint8Array))i+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,i){if(q(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(o,s),c=this.slice(r,i),h=t.slice(e,n);for(let u=0;u<a;++u)if(c[u]!==h[u]){o=c[u],s=h[u];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return S(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":case"latin1":case"binary":return C(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function B(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=e;o<n;++o)i+=W[t[o]];return i}function _(t,e,n){const r=t.slice(e,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function x(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r,i){K(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function L(t,e,n,r,i){K(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function z(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return e=+e,n>>>=0,o||z(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return e=+e,n>>>=0,o||z(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||x(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=J((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=J((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||x(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||x(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||x(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=J((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=J((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||x(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||x(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||x(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||x(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=J((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=J((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=J((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=J((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=u.isBuffer(t)?t:u.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const V={};function $(t,e,n){V[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function R(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function K(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new V.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||j(e,t.length-(n+1))}(r,i,o)}function H(t,e){if("number"!==typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function j(t,e,n){if(Math.floor(t)!==t)throw H(t,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=R(String(n)):"bigint"===typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=R(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const D=/[^+/0-9A-Za-z-_]/g;function G(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function X(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!==t}const W=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function J(t){return"undefined"===typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},42549:function(t,e,n){"use strict";var r,i;n.d(e,{_Y:function(){return h},an:function(){return l}}),function(t){t[t.Testnet=2147483648]="Testnet",t[t.Mainnet=1]="Mainnet"}(r||(r={})),function(t){t[t.Mainnet=0]="Mainnet",t[t.Testnet=128]="Testnet"}(i||(i={}));function o(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function a(t){o(s,r,i,a,u,"next",t)}function u(t){o(s,r,i,a,u,"throw",t)}a(void 0)}))}}function a(t,e){return t(e={exports:{}},e.exports),e.exports}var u=a((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(_){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new B(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=A(s,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=h(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(_){return{type:"throw",arg:_}}}t.wrap=c;var l="suspendedStart",d="suspendedYield",f="executing",p="completed",y={};function g(){}function m(){}function w(){}var v={};v[o]=function(){return this};var S=Object.getPrototypeOf,b=S&&S(S(k([])));b&&b!==n&&r.call(b,o)&&(v=b);var C=w.prototype=g.prototype=Object.create(v);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,o,s,a){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function A(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function k(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:I}}function I(){return{value:e,done:!0}}return m.prototype=C.constructor=w,w.constructor=m,m.displayName=u(w,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,a,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},T(M.prototype),M.prototype[s]=function(){return this},t.AsyncIterator=M,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new M(c(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},T(C),u(C,a,"Generator"),C[o]=function(){return this},C.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(n){Function("r","regeneratorRuntime = r")(e)}}));n(31905);function c(){return(c=s(u.mark((function t(e,n){var r,i,o;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={referrer:"no-referrer",referrerPolicy:"no-referrer"},i=Object.assign(r,n),t.next=4,fetch(e,i);case 4:return o=t.sent,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var h=function(){function t(){var t=this;this.version=i.Mainnet,this.chainId=r.Mainnet,this.coreApiUrl="https://stacks-node-api.mainnet.stacks.co",this.bnsLookupUrl="https://core.blockstack.org",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=function(){return t.version===i.Mainnet},this.getBroadcastApiUrl=function(){return""+t.coreApiUrl+t.broadcastEndpoint},this.getTransferFeeEstimateApiUrl=function(){return""+t.coreApiUrl+t.transferFeeEstimateEndpoint},this.getAccountApiUrl=function(e){return""+t.coreApiUrl+t.accountEndpoint+"/"+e+"?proof=0"},this.getAbiApiUrl=function(e,n){return""+t.coreApiUrl+t.contractAbiEndpoint+"/"+e+"/"+n},this.getReadOnlyFunctionCallApiUrl=function(e,n,r){return""+t.coreApiUrl+t.readOnlyFunctionCallEndpoint+"/"+e+"/"+n+"/"+encodeURIComponent(r)},this.getInfoUrl=function(){return t.coreApiUrl+"/v2/info"},this.getBlockTimeInfoUrl=function(){return t.coreApiUrl+"/extended/v1/info/network_block_times"},this.getPoxInfoUrl=function(){return t.coreApiUrl+"/v2/pox"},this.getStackerInfoUrl=function(e,n){return""+t.coreApiUrl+t.readOnlyFunctionCallEndpoint+"\n    "+e+"/"+n+"/get-stacker-info"}}return t.prototype.getNameInfo=function(t){return function(t,e){return c.apply(this,arguments)}(this.bnsLookupUrl+"/v1/names/"+t).then((function(t){if(404===t.status)throw new Error("Name not found");if(200!==t.status)throw new Error("Bad response status: "+t.status);return t.json()})).then((function(t){return t.address?Object.assign({},t,{address:t.address}):t}))},t}(),l=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).version=i.Testnet,e.chainId=r.Testnet,e.coreApiUrl="https://stacks-node-api.testnet.stacks.co",e}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,o}(h)}}]);